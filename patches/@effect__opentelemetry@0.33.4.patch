diff --git a/dist/cjs/internal/tracer.js b/dist/cjs/internal/tracer.js
index 4ff55d5eda2fa1e6b1bb489a889e959c90a1ce96..5234f0ee6b1d9ea21d28e90713952d2a6ac7a7ae 100644
--- a/dist/cjs/internal/tracer.js
+++ b/dist/cjs/internal/tracer.js
@@ -39,12 +39,20 @@ function _interopRequireWildcard(e, r) {
   return n.default = e, t && t.set(e, n), n;
 }
 const OtelSpanTypeId = /*#__PURE__*/Symbol.for("@effect/opentelemetry/Tracer/OtelSpan");
+const kindMap = {
+  "internal": OtelApi.SpanKind.INTERNAL,
+  "client": OtelApi.SpanKind.CLIENT,
+  "server": OtelApi.SpanKind.SERVER,
+  "producer": OtelApi.SpanKind.PRODUCER,
+  "consumer": OtelApi.SpanKind.CONSUMER
+};
 /** @internal */
 class OtelSpan {
   name;
   parent;
   context;
   links;
+  kind;
   [OtelSpanTypeId];
   _tag = "Span";
   span;
@@ -53,11 +61,12 @@ class OtelSpan {
   attributes = new Map();
   sampled;
   status;
-  constructor(contextApi, tracer, name, parent, context, links, startTime) {
+  constructor(contextApi, tracer, name, parent, context, links, startTime, kind) {
     this.name = name;
     this.parent = parent;
     this.context = context;
     this.links = links;
+    this.kind = kind;
     this[OtelSpanTypeId] = OtelSpanTypeId;
     const active = contextApi.active();
     this.span = tracer.startSpan(name, {
@@ -65,7 +74,8 @@ class OtelSpan {
       links: links.length > 0 ? links.map(link => ({
         context: makeSpanContext(link.span),
         attributes: recordToAttributes(link.attributes)
-      })) : undefined
+      })) : undefined,
+      kind: kindMap[this.kind]
     }, parent._tag === "Some" ? populateContext(active, parent.value, context) : OtelApi.trace.deleteSpan(active));
     const spanContext = this.span.spanContext();
     this.spanId = spanContext.spanId;
@@ -119,8 +129,8 @@ const TracerProvider = exports.TracerProvider = /*#__PURE__*/Context.GenericTag(
 const Tracer = exports.Tracer = /*#__PURE__*/Context.GenericTag("@effect/opentelemetry/Tracer/Tracer");
 /** @internal */
 const make = exports.make = /*#__PURE__*/Effect.map(Tracer, tracer => EffectTracer.make({
-  span(name, parent, context, links, startTime) {
-    return new OtelSpan(OtelApi.context, tracer, name, parent, context, links, startTime);
+  span(name, parent, context, links, startTime, kind) {
+    return new OtelSpan(OtelApi.context, tracer, name, parent, context, links, startTime, kind);
   },
   context(execution, fiber) {
     const currentSpan = fiber.getFiberRef(FiberRef.currentContext).unsafeMap.get(EffectTracer.ParentSpan.key);
diff --git a/dist/cjs/internal/tracer.js.map b/dist/cjs/internal/tracer.js.map
index a5bc195b405c58f70bae2d2feeadc71499039881..00bec9f6187592801a15b307edde0c9ae27cca0a 100644
--- a/dist/cjs/internal/tracer.js.map
+++ b/dist/cjs/internal/tracer.js.map
@@ -1 +1 @@
-{"version":3,"file":"tracer.js","names":["OtelApi","_interopRequireWildcard","require","Cause","Context","Effect","FiberRef","Layer","Option","EffectTracer","_Resource","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","OtelSpanTypeId","Symbol","for","OtelSpan","name","parent","context","links","_tag","span","spanId","traceId","attributes","Map","sampled","status","constructor","contextApi","tracer","startTime","active","startSpan","nanosToHrTime","length","map","link","makeSpanContext","recordToAttributes","undefined","populateContext","value","trace","deleteSpan","spanContext","traceFlags","TraceFlags","SAMPLED","attribute","key","setAttribute","unknownToAttributeValue","end","endTime","exit","setStatus","code","SpanStatusCode","OK","isInterruptedOnly","cause","message","pretty","ERROR","event","addEvent","exports","TracerProvider","GenericTag","Tracer","make","execution","fiber","currentSpan","getFiberRef","currentContext","unsafeMap","ParentSpan","with","traceFlagsTag","traceStateTag","makeExternalSpan","options","empty","add","traceState","match","createTraceState","onNone","onSome","currentOtelSpan","flatMap","succeed","fail","NoSuchElementException","layerGlobalProvider","sync","getTracerProvider","layerTracer","effect","zip","Resource","resource","provider","getTracer","layerGlobalTracer","pipe","provide","layerGlobal","unwrapEffect","setTracer","layer","bigint1e9","timestamp","Number","liftThrowable","otelContext","setSpan","setSpanContext","isRemote","getOrElse","extractTraceTag","getOption","getOrUndefined","tag","orElse","entries","reduce","acc","objectToAttribute","JSON","stringify","String"],"sources":["../../../src/internal/tracer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"tracer.js","names":["OtelApi","_interopRequireWildcard","require","Cause","Context","Effect","FiberRef","Layer","Option","EffectTracer","_Resource","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","OtelSpanTypeId","Symbol","for","kindMap","SpanKind","INTERNAL","CLIENT","SERVER","PRODUCER","CONSUMER","OtelSpan","name","parent","context","links","kind","_tag","span","spanId","traceId","attributes","Map","sampled","status","constructor","contextApi","tracer","startTime","active","startSpan","nanosToHrTime","length","map","link","makeSpanContext","recordToAttributes","undefined","populateContext","value","trace","deleteSpan","spanContext","traceFlags","TraceFlags","SAMPLED","attribute","key","setAttribute","unknownToAttributeValue","end","endTime","exit","setStatus","code","SpanStatusCode","OK","isInterruptedOnly","cause","message","pretty","ERROR","event","addEvent","exports","TracerProvider","GenericTag","Tracer","make","execution","fiber","currentSpan","getFiberRef","currentContext","unsafeMap","ParentSpan","with","traceFlagsTag","traceStateTag","makeExternalSpan","options","empty","add","traceState","match","createTraceState","onNone","onSome","currentOtelSpan","flatMap","succeed","fail","NoSuchElementException","layerGlobalProvider","sync","getTracerProvider","layerTracer","effect","zip","Resource","resource","provider","getTracer","layerGlobalTracer","pipe","provide","layerGlobal","unwrapEffect","setTracer","layer","bigint1e9","timestamp","Number","liftThrowable","otelContext","setSpan","setSpanContext","isRemote","getOrElse","extractTraceTag","getOption","getOrUndefined","tag","orElse","entries","reduce","acc","objectToAttribute","JSON","stringify","String"],"sources":["../../../src/internal/tracer.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,IAAAA,OAAA,gBAAAC,uBAAA,eAAAC,OAAA;AACA,IAAAC,KAAA,gBAAAF,uBAAA,eAAAC,OAAA;AACA,IAAAE,OAAA,gBAAAH,uBAAA,eAAAC,OAAA;AACA,IAAAG,MAAA,gBAAAJ,uBAAA,eAAAC,OAAA;AAEA,IAAAI,QAAA,gBAAAL,uBAAA,eAAAC,OAAA;AACA,IAAAK,KAAA,gBAAAN,uBAAA,eAAAC,OAAA;AACA,IAAAM,MAAA,gBAAAP,uBAAA,eAAAC,OAAA;AACA,IAAAO,YAAA,gBAAAR,uBAAA,eAAAC,OAAA;AACA,IAAAQ,SAAA,gBAAAR,OAAA;AAAyC,SAAAS,yBAAAC,CAAA;EAAA,yBAAAC,OAAA;EAAA,IAAAC,CAAA,OAAAD,OAAA;IAAAE,CAAA,OAAAF,OAAA;EAAA,QAAAF,wBAAA,YAAAA,CAAAC,CAAA;IAAA,OAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA;EAAA,GAAAF,CAAA;AAAA;AAAA,SAAAX,wBAAAW,CAAA,EAAAE,CAAA;EAAA,KAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA;EAAA,aAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA;IAAAK,OAAA,EAAAL;EAAA;EAAA,IAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA;EAAA,IAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA;EAAA,IAAAQ,CAAA;MAAAC,SAAA;IAAA;IAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA;EAAA,SAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,CAAA;IAAA,IAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA;IAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA;EAAA;EAAA,OAAAN,CAAA,CAAAH,OAAA,GAAAL,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAe,GAAA,CAAAlB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAAA;AAEzC,MAAMW,cAAc,gBAAGC,MAAM,CAACC,GAAG,CAAC,uCAAuC,CAAC;AAE1E,MAAMC,OAAO,GAAG;EACd,UAAU,EAAElC,OAAO,CAACmC,QAAQ,CAACC,QAAQ;EACrC,QAAQ,EAAEpC,OAAO,CAACmC,QAAQ,CAACE,MAAM;EACjC,QAAQ,EAAErC,OAAO,CAACmC,QAAQ,CAACG,MAAM;EACjC,UAAU,EAAEtC,OAAO,CAACmC,QAAQ,CAACI,QAAQ;EACrC,UAAU,EAAEvC,OAAO,CAACmC,QAAQ,CAACK;CAC9B;AAED;AACM,MAAOC,QAAQ;EAcRC,IAAA;EACAC,MAAA;EACAC,OAAA;EACAC,KAAA;EAEAC,IAAA;EAlBF,CAACf,cAAc;EACfgB,IAAI,GAAG,MAAM;EAEbC,IAAI;EACJC,MAAM;EACNC,OAAO;EACPC,UAAU,GAAG,IAAIC,GAAG,EAAmB;EACvCC,OAAO;EAChBC,MAAM;EAENC,YACEC,UAA8B,EAC9BC,MAAsB,EACbf,IAAY,EACZC,MAA2C,EAC3CC,OAA+B,EAC/BC,KAA2C,EACpDa,SAAiB,EACRZ,IAA2B;IAL3B,KAAAJ,IAAI,GAAJA,IAAI;IACJ,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,OAAO,GAAPA,OAAO;IACP,KAAAC,KAAK,GAALA,KAAK;IAEL,KAAAC,IAAI,GAAJA,IAAI;IAEb,IAAI,CAACf,cAAc,CAAC,GAAGA,cAAc;IACrC,MAAM4B,MAAM,GAAGH,UAAU,CAACG,MAAM,EAAE;IAClC,IAAI,CAACX,IAAI,GAAGS,MAAM,CAACG,SAAS,CAC1BlB,IAAI,EACJ;MACEgB,SAAS,EAAEG,aAAa,CAACH,SAAS,CAAC;MACnCb,KAAK,EAAEA,KAAK,CAACiB,MAAM,GAAG,CAAC,GACnBjB,KAAK,CAACkB,GAAG,CAAEC,IAAI,KAAM;QACrBpB,OAAO,EAAEqB,eAAe,CAACD,IAAI,CAAChB,IAAI,CAAC;QACnCG,UAAU,EAAEe,kBAAkB,CAACF,IAAI,CAACb,UAAU;OAC/C,CAAC,CAAC,GACDgB,SAAgB;MACpBrB,IAAI,EAAEZ,OAAO,CAAC,IAAI,CAACY,IAAI;KACxB,EACDH,MAAM,CAACI,IAAI,KAAK,MAAM,GAClBqB,eAAe,CAACT,MAAM,EAAEhB,MAAM,CAAC0B,KAAK,EAAEzB,OAAO,CAAC,GAC9C5C,OAAO,CAACsE,KAAK,CAACC,UAAU,CAACZ,MAAM,CAAC,CACrC;IACD,MAAMa,WAAW,GAAG,IAAI,CAACxB,IAAI,CAACwB,WAAW,EAAE;IAC3C,IAAI,CAACvB,MAAM,GAAGuB,WAAW,CAACvB,MAAM;IAChC,IAAI,CAACC,OAAO,GAAGsB,WAAW,CAACtB,OAAO;IAClC,IAAI,CAACI,MAAM,GAAG;MACZP,IAAI,EAAE,SAAS;MACfW;KACD;IACD,IAAI,CAACL,OAAO,GAAG,CAACmB,WAAW,CAACC,UAAU,GAAGzE,OAAO,CAAC0E,UAAU,CAACC,OAAO,MAAM3E,OAAO,CAAC0E,UAAU,CAACC,OAAO;EACrG;EAEAC,SAASA,CAACC,GAAW,EAAER,KAAc;IACnC,IAAI,CAACrB,IAAI,CAAC8B,YAAY,CAACD,GAAG,EAAEE,uBAAuB,CAACV,KAAK,CAAC,CAAC;IAC3D,IAAI,CAAClB,UAAU,CAACrB,GAAG,CAAC+C,GAAG,EAAER,KAAK,CAAC;EACjC;EAEAW,GAAGA,CAACC,OAAe,EAAEC,IAA4B;IAC/C,IAAI,CAAC5B,MAAM,GAAG;MACZP,IAAI,EAAE,OAAO;MACbkC,OAAO;MACPC,IAAI;MACJxB,SAAS,EAAE,IAAI,CAACJ,MAAM,CAACI;KACxB;IAED,IAAIwB,IAAI,CAACnC,IAAI,KAAK,SAAS,EAAE;MAC3B,IAAI,CAACC,IAAI,CAACmC,SAAS,CAAC;QAClBC,IAAI,EAAEpF,OAAO,CAACqF,cAAc,CAACC;OAC9B,CAAC;IACJ,CAAC,MAAM;MACL,IAAInF,KAAK,CAACoF,iBAAiB,CAACL,IAAI,CAACM,KAAK,CAAC,EAAE;QACvC,IAAI,CAACxC,IAAI,CAACmC,SAAS,CAAC;UAClBC,IAAI,EAAEpF,OAAO,CAACqF,cAAc,CAACC,EAAE;UAC/BG,OAAO,EAAEtF,KAAK,CAACuF,MAAM,CAACR,IAAI,CAACM,KAAK;SACjC,CAAC;QACF,IAAI,CAACxC,IAAI,CAAC8B,YAAY,CAAC,YAAY,EAAE,gBAAgB,CAAC;QACtD,IAAI,CAAC9B,IAAI,CAAC8B,YAAY,CAAC,oBAAoB,EAAE,IAAI,CAAC;MACpD,CAAC,MAAM;QACL,IAAI,CAAC9B,IAAI,CAACmC,SAAS,CAAC;UAClBC,IAAI,EAAEpF,OAAO,CAACqF,cAAc,CAACM,KAAK;UAClCF,OAAO,EAAEtF,KAAK,CAACuF,MAAM,CAACR,IAAI,CAACM,KAAK;SACjC,CAAC;MACJ;IACF;IACA,IAAI,CAACxC,IAAI,CAACgC,GAAG,CAACnB,aAAa,CAACoB,OAAO,CAAC,CAAC;EACvC;EAEAW,KAAKA,CAAClD,IAAY,EAAEgB,SAAiB,EAAEP,UAAoC;IACzE,IAAI,CAACH,IAAI,CAAC6C,QAAQ,CAChBnD,IAAI,EACJS,UAAU,GAAGe,kBAAkB,CAACf,UAAU,CAAC,GAAGgB,SAAS,EACvDN,aAAa,CAACH,SAAS,CAAC,CACzB;EACH;;AAGF;AAAAoC,OAAA,CAAArD,QAAA,GAAAA,QAAA;AACO,MAAMsD,cAAc,GAAAD,OAAA,CAAAC,cAAA,gBAAG3F,OAAO,CAAC4F,UAAU,CAAyB,6CAA6C,CAAC;AAEvH;AACO,MAAMC,MAAM,GAAAH,OAAA,CAAAG,MAAA,gBAAG7F,OAAO,CAAC4F,UAAU,CAAiB,qCAAqC,CAAC;AAE/F;AACO,MAAME,IAAI,GAAAJ,OAAA,CAAAI,IAAA,gBAAG7F,MAAM,CAAC0D,GAAG,CAACkC,MAAM,EAAGxC,MAAM,IAC5ChD,YAAY,CAACyF,IAAI,CAAC;EAChBlD,IAAIA,CAACN,IAAI,EAAEC,MAAM,EAAEC,OAAO,EAAEC,KAAK,EAAEa,SAAS,EAAEZ,IAAI;IAChD,OAAO,IAAIL,QAAQ,CACjBzC,OAAO,CAAC4C,OAAO,EACfa,MAAM,EACNf,IAAI,EACJC,MAAM,EACNC,OAAO,EACPC,KAAK,EACLa,SAAS,EACTZ,IAAI,CACL;EACH,CAAC;EACDF,OAAOA,CAACuD,SAAS,EAAEC,KAAK;IACtB,MAAMC,WAAW,GAAGD,KAAK,CAACE,WAAW,CAAChG,QAAQ,CAACiG,cAAc,CAAC,CAACC,SAAS,CAACrF,GAAG,CAACV,YAAY,CAACgG,UAAU,CAAC5B,GAAG,CAE3F;IAEb,IAAIwB,WAAW,KAAKlC,SAAS,EAAE;MAC7B,OAAOgC,SAAS,EAAE;IACpB;IAEA,OAAOnG,OAAO,CAAC4C,OAAO,CAAC8D,IAAI,CACzBtC,eAAe,CAACpE,OAAO,CAAC4C,OAAO,CAACe,MAAM,EAAE,EAAE0C,WAAW,CAAC,EACtDF,SAAS,CACV;EACH;CACD,CAAC,CAAC;AAEL;AACO,MAAMQ,aAAa,GAAAb,OAAA,CAAAa,aAAA,gBAAGvG,OAAO,CAAC4F,UAAU,CAAqB,kCAAkC,CAAC;AAEvG;AACO,MAAMY,aAAa,GAAAd,OAAA,CAAAc,aAAA,gBAAGxG,OAAO,CAAC4F,UAAU,CAAqB,kCAAkC,CAAC;AAEvG;AACO,MAAMa,gBAAgB,GAAIC,OAKhC,IAA+B;EAC9B,IAAIlE,OAAO,GAAGxC,OAAO,CAAC2G,KAAK,EAAE;EAE7B,IAAID,OAAO,CAACrC,UAAU,EAAE;IACtB7B,OAAO,GAAGxC,OAAO,CAAC4G,GAAG,CAACpE,OAAO,EAAE+D,aAAa,EAAEG,OAAO,CAACrC,UAAU,CAAC;EACnE;EAEA,IAAI,OAAOqC,OAAO,CAACG,UAAU,KAAK,QAAQ,EAAE;IAC1CrE,OAAO,GAAGpC,MAAM,CAAC0G,KAAK,CAACC,gBAAgB,CAACL,OAAO,CAACG,UAAU,CAAC,EAAE;MAC3DG,MAAM,EAAEA,CAAA,KAAMxE,OAAO;MACrByE,MAAM,EAAGJ,UAAU,IAAK7G,OAAO,CAAC4G,GAAG,CAACpE,OAAO,EAAEgE,aAAa,EAAEK,UAAU;KACvE,CAAC;EACJ,CAAC,MAAM,IAAIH,OAAO,CAACG,UAAU,EAAE;IAC7BrE,OAAO,GAAGxC,OAAO,CAAC4G,GAAG,CAACpE,OAAO,EAAEgE,aAAa,EAAEE,OAAO,CAACG,UAAU,CAAC;EACnE;EAEA,OAAO;IACLlE,IAAI,EAAE,cAAc;IACpBG,OAAO,EAAE4D,OAAO,CAAC5D,OAAO;IACxBD,MAAM,EAAE6D,OAAO,CAAC7D,MAAM;IACtBI,OAAO,EAAEyD,OAAO,CAACrC,UAAU,GACvB,CAACqC,OAAO,CAACrC,UAAU,GAAGzE,OAAO,CAAC0E,UAAU,CAACC,OAAO,MAAM3E,OAAO,CAAC0E,UAAU,CAACC,OAAO,GAChF,IAAI;IACR/B;GACD;AACH,CAAC;AAED;AAAAkD,OAAA,CAAAe,gBAAA,GAAAA,gBAAA;AACO,MAAMS,eAAe,GAAAxB,OAAA,CAAAwB,eAAA,gBAAGjH,MAAM,CAACkH,OAAO,CAC3ClH,MAAM,CAACgG,WAAW,EACjBrD,IAAI,IAAI;EACP,IAAIjB,cAAc,IAAIiB,IAAI,EAAE;IAC1B,OAAO3C,MAAM,CAACmH,OAAO,CAAExE,IAAiB,CAACA,IAAI,CAAC;EAChD;EACA,OAAO3C,MAAM,CAACoH,IAAI,CAAC,IAAItH,KAAK,CAACuH,sBAAsB,EAAE,CAAC;AACxD,CAAC,CACF;AAED;AACO,MAAMC,mBAAmB,GAAA7B,OAAA,CAAA6B,mBAAA,gBAAGpH,KAAK,CAACqH,IAAI,CAC3C7B,cAAc,EACd,MAAM/F,OAAO,CAACsE,KAAK,CAACuD,iBAAiB,EAAE,CACxC;AAED;AACO,MAAMC,WAAW,GAAAhC,OAAA,CAAAgC,WAAA,gBAAGvH,KAAK,CAACwH,MAAM,CACrC9B,MAAM,eACN5F,MAAM,CAACkH,OAAO,eACZlH,MAAM,CAAC2H,GAAG,CAACtH,SAAA,CAAAuH,QAAQ,EAAElC,cAAc,CAAC,EACpC,CAAC,CAACmC,QAAQ,EAAEC,QAAQ,CAAC,KACnB9H,MAAM,CAACuH,IAAI,CAAC,MACVO,QAAQ,CAACC,SAAS,CAChBF,QAAQ,CAAC/E,UAAU,CAAC,cAAc,CAAW,EAC7C+E,QAAQ,CAAC/E,UAAU,CAAC,iBAAiB,CAAW,CACjD,CACF,CACJ,CACF;AAED;AACO,MAAMkF,iBAAiB,GAAAvC,OAAA,CAAAuC,iBAAA,gBAAGP,WAAW,CAACQ,IAAI,eAC/C/H,KAAK,CAACgI,OAAO,CAACZ,mBAAmB,CAAC,CACnC;AAED;AACO,MAAMa,WAAW,GAAA1C,OAAA,CAAA0C,WAAA,gBAAGjI,KAAK,CAACkI,YAAY,CAACpI,MAAM,CAAC0D,GAAG,CAACmC,IAAI,EAAE3F,KAAK,CAACmI,SAAS,CAAC,CAAC,CAACJ,IAAI,eACnF/H,KAAK,CAACgI,OAAO,CAACF,iBAAiB,CAAC,CACjC;AAED;AACO,MAAMM,KAAK,GAAA7C,OAAA,CAAA6C,KAAA,gBAAGpI,KAAK,CAACkI,YAAY,CAACpI,MAAM,CAAC0D,GAAG,CAACmC,IAAI,EAAE3F,KAAK,CAACmI,SAAS,CAAC,CAAC,CAACJ,IAAI,eAC7E/H,KAAK,CAACgI,OAAO,CAACT,WAAW,CAAC,CAC3B;AAED;AACA;AACA;AAEA,MAAMc,SAAS,GAAG,WAAc;AAChC,MAAM/E,aAAa,GAAIgF,SAAiB,IAAoB;EAC1D,OAAO,CAACC,MAAM,CAACD,SAAS,GAAGD,SAAS,CAAC,EAAEE,MAAM,CAACD,SAAS,GAAGD,SAAS,CAAC,CAAC;AACvE,CAAC;AAED,MAAMzB,gBAAgB,gBAAG3G,MAAM,CAACuI,aAAa,CAAC/I,OAAO,CAACmH,gBAAgB,CAAC;AAEvE,MAAM/C,eAAe,GAAGA,CACtB4E,WAA4B,EAC5BhG,IAA0B,EAC1BJ,OAAgC,KAEhCI,IAAI,YAAYP,QAAQ,GACtBzC,OAAO,CAACsE,KAAK,CAAC2E,OAAO,CAACD,WAAW,EAAEhG,IAAI,CAACA,IAAI,CAAC,GAC7ChD,OAAO,CAACsE,KAAK,CAAC4E,cAAc,CAACF,WAAW,EAAE/E,eAAe,CAACjB,IAAI,EAAEJ,OAAO,CAAC,CAAC;AAE7E,MAAMqB,eAAe,GAAGA,CAACjB,IAA0B,EAAEJ,OAAgC,MAA2B;EAC9GK,MAAM,EAAED,IAAI,CAACC,MAAM;EACnBC,OAAO,EAAEF,IAAI,CAACE,OAAO;EACrBiG,QAAQ,EAAEnG,IAAI,CAACD,IAAI,KAAK,cAAc;EACtC0B,UAAU,EAAEjE,MAAM,CAAC4I,SAAS,CAC1BxG,OAAO,GACLyG,eAAe,CAACrG,IAAI,EAAEJ,OAAO,EAAE+D,aAAa,CAAC,GAC7CvG,OAAO,CAACkJ,SAAS,CAACtG,IAAI,CAACJ,OAAO,EAAE+D,aAAa,CAAC,EAChD,MAAM3G,OAAO,CAAC0E,UAAU,CAACC,OAAO,CACjC;EACDsC,UAAU,EAAEzG,MAAM,CAAC+I,cAAc,CAC/B3G,OAAO,GACLyG,eAAe,CAACrG,IAAI,EAAEJ,OAAO,EAAEgE,aAAa,CAAC,GAC7CxG,OAAO,CAACkJ,SAAS,CAACtG,IAAI,CAACJ,OAAO,EAAEgE,aAAa,CAAC;CAEnD,CAAC;AAEF,MAAMyC,eAAe,GAAGA,CACtB1G,MAA4B,EAC5BC,OAA+B,EAC/B4G,GAAsB,KAEtBhJ,MAAM,CAACiJ,MAAM,CACXrJ,OAAO,CAACkJ,SAAS,CAAC1G,OAAO,EAAE4G,GAAG,CAAC,EAC/B,MAAMpJ,OAAO,CAACkJ,SAAS,CAAC3G,MAAM,CAACC,OAAO,EAAE4G,GAAG,CAAC,CAC7C;AAEH,MAAMtF,kBAAkB,GAAIG,KAA8B,IAAwB;EAChF,OAAO9C,MAAM,CAACmI,OAAO,CAACrF,KAAK,CAAC,CAACsF,MAAM,CAAC,CAACC,GAAG,EAAE,CAAC/E,GAAG,EAAER,KAAK,CAAC,KAAI;IACxDuF,GAAG,CAAC/E,GAAG,CAAC,GAAGE,uBAAuB,CAACV,KAAK,CAAC;IACzC,OAAOuF,GAAG;EACZ,CAAC,EAAE,EAAwB,CAAC;AAC9B,CAAC;AAED,MAAM7E,uBAAuB,GAAIV,KAAc,IAA4B;EACzE,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAI,OAAOA,KAAK,KAAK,SAAS,EAAE;IACxF,OAAOA,KAAK;EACd,CAAC,MAAM,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IACpC,OAAOyE,MAAM,CAACzE,KAAK,CAAC;EACtB;EAEA,OAAOwF,iBAAiB,CAACxF,KAAK,CAAC;AACjC,CAAC;AAED,MAAMwF,iBAAiB,GAAIxF,KAAc,IAAY;EACnD,IAAI;IACF,OAAOyF,IAAI,CAACC,SAAS,CAAC1F,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;EACvC,CAAC,CAAC,MAAM;IACN,OAAO2F,MAAM,CAAC3F,KAAK,CAAC;EACtB;AACF,CAAC","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/esm/internal/tracer.js b/dist/esm/internal/tracer.js
index 65c1051052d347932fc827321a7a376207c41f69..94b6cbf9ee3928a6f3c9e3302647968f1e1bdf3a 100644
--- a/dist/esm/internal/tracer.js
+++ b/dist/esm/internal/tracer.js
@@ -8,12 +8,20 @@ import * as Option from "effect/Option";
 import * as EffectTracer from "effect/Tracer";
 import { Resource } from "../Resource.js";
 const OtelSpanTypeId = /*#__PURE__*/Symbol.for("@effect/opentelemetry/Tracer/OtelSpan");
+const kindMap = {
+  "internal": OtelApi.SpanKind.INTERNAL,
+  "client": OtelApi.SpanKind.CLIENT,
+  "server": OtelApi.SpanKind.SERVER,
+  "producer": OtelApi.SpanKind.PRODUCER,
+  "consumer": OtelApi.SpanKind.CONSUMER
+};
 /** @internal */
 export class OtelSpan {
   name;
   parent;
   context;
   links;
+  kind;
   [OtelSpanTypeId];
   _tag = "Span";
   span;
@@ -22,11 +30,12 @@ export class OtelSpan {
   attributes = new Map();
   sampled;
   status;
-  constructor(contextApi, tracer, name, parent, context, links, startTime) {
+  constructor(contextApi, tracer, name, parent, context, links, startTime, kind) {
     this.name = name;
     this.parent = parent;
     this.context = context;
     this.links = links;
+    this.kind = kind;
     this[OtelSpanTypeId] = OtelSpanTypeId;
     const active = contextApi.active();
     this.span = tracer.startSpan(name, {
@@ -34,7 +43,8 @@ export class OtelSpan {
       links: links.length > 0 ? links.map(link => ({
         context: makeSpanContext(link.span),
         attributes: recordToAttributes(link.attributes)
-      })) : undefined
+      })) : undefined,
+      kind: kindMap[this.kind]
     }, parent._tag === "Some" ? populateContext(active, parent.value, context) : OtelApi.trace.deleteSpan(active));
     const spanContext = this.span.spanContext();
     this.spanId = spanContext.spanId;
@@ -87,8 +97,8 @@ export const TracerProvider = /*#__PURE__*/Context.GenericTag("@effect/opentelem
 export const Tracer = /*#__PURE__*/Context.GenericTag("@effect/opentelemetry/Tracer/Tracer");
 /** @internal */
 export const make = /*#__PURE__*/Effect.map(Tracer, tracer => EffectTracer.make({
-  span(name, parent, context, links, startTime) {
-    return new OtelSpan(OtelApi.context, tracer, name, parent, context, links, startTime);
+  span(name, parent, context, links, startTime, kind) {
+    return new OtelSpan(OtelApi.context, tracer, name, parent, context, links, startTime, kind);
   },
   context(execution, fiber) {
     const currentSpan = fiber.getFiberRef(FiberRef.currentContext).unsafeMap.get(EffectTracer.ParentSpan.key);
diff --git a/dist/esm/internal/tracer.js.map b/dist/esm/internal/tracer.js.map
index 567a4f21cfc1664902ef6e4c4d47a2a4a1a87c38..ea99afdd626c0263256a1da6b75e6695490b8e27 100644
--- a/dist/esm/internal/tracer.js.map
+++ b/dist/esm/internal/tracer.js.map
@@ -1 +1 @@
-{"version":3,"file":"tracer.js","names":["OtelApi","Cause","Context","Effect","FiberRef","Layer","Option","EffectTracer","Resource","OtelSpanTypeId","Symbol","for","OtelSpan","name","parent","context","links","_tag","span","spanId","traceId","attributes","Map","sampled","status","constructor","contextApi","tracer","startTime","active","startSpan","nanosToHrTime","length","map","link","makeSpanContext","recordToAttributes","undefined","populateContext","value","trace","deleteSpan","spanContext","traceFlags","TraceFlags","SAMPLED","attribute","key","setAttribute","unknownToAttributeValue","set","end","endTime","exit","setStatus","code","SpanStatusCode","OK","isInterruptedOnly","cause","message","pretty","ERROR","event","addEvent","TracerProvider","GenericTag","Tracer","make","execution","fiber","currentSpan","getFiberRef","currentContext","unsafeMap","get","ParentSpan","with","traceFlagsTag","traceStateTag","makeExternalSpan","options","empty","add","traceState","match","createTraceState","onNone","onSome","currentOtelSpan","flatMap","succeed","fail","NoSuchElementException","layerGlobalProvider","sync","getTracerProvider","layerTracer","effect","zip","resource","provider","getTracer","layerGlobalTracer","pipe","provide","layerGlobal","unwrapEffect","setTracer","layer","bigint1e9","timestamp","Number","liftThrowable","otelContext","setSpan","setSpanContext","isRemote","getOrElse","extractTraceTag","getOption","getOrUndefined","tag","orElse","Object","entries","reduce","acc","objectToAttribute","JSON","stringify","String"],"sources":["../../../src/internal/tracer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"tracer.js","names":["OtelApi","Cause","Context","Effect","FiberRef","Layer","Option","EffectTracer","Resource","OtelSpanTypeId","Symbol","for","kindMap","SpanKind","INTERNAL","CLIENT","SERVER","PRODUCER","CONSUMER","OtelSpan","name","parent","context","links","kind","_tag","span","spanId","traceId","attributes","Map","sampled","status","constructor","contextApi","tracer","startTime","active","startSpan","nanosToHrTime","length","map","link","makeSpanContext","recordToAttributes","undefined","populateContext","value","trace","deleteSpan","spanContext","traceFlags","TraceFlags","SAMPLED","attribute","key","setAttribute","unknownToAttributeValue","set","end","endTime","exit","setStatus","code","SpanStatusCode","OK","isInterruptedOnly","cause","message","pretty","ERROR","event","addEvent","TracerProvider","GenericTag","Tracer","make","execution","fiber","currentSpan","getFiberRef","currentContext","unsafeMap","get","ParentSpan","with","traceFlagsTag","traceStateTag","makeExternalSpan","options","empty","add","traceState","match","createTraceState","onNone","onSome","currentOtelSpan","flatMap","succeed","fail","NoSuchElementException","layerGlobalProvider","sync","getTracerProvider","layerTracer","effect","zip","resource","provider","getTracer","layerGlobalTracer","pipe","provide","layerGlobal","unwrapEffect","setTracer","layer","bigint1e9","timestamp","Number","liftThrowable","otelContext","setSpan","setSpanContext","isRemote","getOrElse","extractTraceTag","getOption","getOrUndefined","tag","orElse","Object","entries","reduce","acc","objectToAttribute","JSON","stringify","String"],"sources":["../../../src/internal/tracer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/src/internal/tracer.ts b/src/internal/tracer.ts
index a0485ee10d8eab44750b62ad9c9a552c4b458000..ecccf7d9539b117bde99b1007ac7ef94d3fd1586 100644
--- a/src/internal/tracer.ts
+++ b/src/internal/tracer.ts
@@ -11,6 +11,14 @@ import { Resource } from "../Resource.js"
 
 const OtelSpanTypeId = Symbol.for("@effect/opentelemetry/Tracer/OtelSpan")
 
+const kindMap = {
+  "internal": OtelApi.SpanKind.INTERNAL,
+  "client": OtelApi.SpanKind.CLIENT,
+  "server": OtelApi.SpanKind.SERVER,
+  "producer": OtelApi.SpanKind.PRODUCER,
+  "consumer": OtelApi.SpanKind.CONSUMER
+}
+
 /** @internal */
 export class OtelSpan implements EffectTracer.Span {
   readonly [OtelSpanTypeId]: typeof OtelSpanTypeId
@@ -30,7 +38,8 @@ export class OtelSpan implements EffectTracer.Span {
     readonly parent: Option.Option<EffectTracer.AnySpan>,
     readonly context: Context.Context<never>,
     readonly links: ReadonlyArray<EffectTracer.SpanLink>,
-    startTime: bigint
+    startTime: bigint,
+    readonly kind: EffectTracer.SpanKind
   ) {
     this[OtelSpanTypeId] = OtelSpanTypeId
     const active = contextApi.active()
@@ -43,7 +52,8 @@ export class OtelSpan implements EffectTracer.Span {
             context: makeSpanContext(link.span),
             attributes: recordToAttributes(link.attributes)
           }))
-          : undefined as any
+          : undefined as any,
+        kind: kindMap[this.kind]
       },
       parent._tag === "Some"
         ? populateContext(active, parent.value, context)
@@ -112,7 +122,7 @@ export const Tracer = Context.GenericTag<OtelApi.Tracer>("@effect/opentelemetry/
 /** @internal */
 export const make = Effect.map(Tracer, (tracer) =>
   EffectTracer.make({
-    span(name, parent, context, links, startTime) {
+    span(name, parent, context, links, startTime, kind) {
       return new OtelSpan(
         OtelApi.context,
         tracer,
@@ -120,7 +130,8 @@ export const make = Effect.map(Tracer, (tracer) =>
         parent,
         context,
         links,
-        startTime
+        startTime,
+        kind
       )
     },
     context(execution, fiber) {
