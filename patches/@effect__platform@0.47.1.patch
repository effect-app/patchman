diff --git a/dist/cjs/Http/IncomingMessage.js b/dist/cjs/Http/IncomingMessage.js
index 2759ad73feec789e09f2545394d6330a748dc961..8d151b87a35208d4ceb33525f7c17004daba1d57 100644
--- a/dist/cjs/Http/IncomingMessage.js
+++ b/dist/cjs/Http/IncomingMessage.js
@@ -123,7 +123,7 @@ const schemaExternalSpan = exports.schemaExternalSpan = /*#__PURE__*/(0, _Functi
       parentSpanId: parts[3]
     });
   }
-  return ParseResult.fail(ParseResult.type(ast, input));
+  return ParseResult.fail(new ParseResult.Type(ast, input));
 }, _ => ParseResult.succeed({
   b3: ""
 })), /*#__PURE__*/Schema.transform( /*#__PURE__*/Schema.struct({
diff --git a/dist/cjs/Http/IncomingMessage.js.map b/dist/cjs/Http/IncomingMessage.js.map
index f7b6eb58d7cdb286155761078f778b1a4ac8d7e1..a0b85ce160c15445a972fcafe24114a10e9363c9 100644
--- a/dist/cjs/Http/IncomingMessage.js.map
+++ b/dist/cjs/Http/IncomingMessage.js.map
@@ -1 +1 @@
-{"version":3,"file":"IncomingMessage.js","names":["ParseResult","_interopRequireWildcard","require","Schema","Effect","FiberRef","_Function","Global","Option","Tracer","FileSystem","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","schemaBodyJson","schema","parse","decodeUnknown","self","flatMap","json","schemaBodyJsonEffect","decode","effect","scoped","schemaBodyUrlParams","urlParamsBody","_","fromEntries","schemaBodyUrlParamsEffect","schemaHeaders","headers","schemaHeadersEffect","SpanSchema","struct","traceId","string","spanId","parentSpanId","union","undefined","sampled","boolean","schemaExternalSpan","flow","transformOrFail","b3","NonEmpty","input","ast","parts","split","length","succeed","fail","type","transform","optional","map","externalSpan","maxBodySize","globalValue","unsafeMake","none","withMaxBodySize","dual","size","locally","Size"],"sources":["../../../src/Http/IncomingMessage.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"IncomingMessage.js","names":["ParseResult","_interopRequireWildcard","require","Schema","Effect","FiberRef","_Function","Global","Option","Tracer","FileSystem","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","schemaBodyJson","schema","parse","decodeUnknown","self","flatMap","json","schemaBodyJsonEffect","decode","effect","scoped","schemaBodyUrlParams","urlParamsBody","_","fromEntries","schemaBodyUrlParamsEffect","schemaHeaders","headers","schemaHeadersEffect","SpanSchema","struct","traceId","string","spanId","parentSpanId","union","undefined","sampled","boolean","schemaExternalSpan","flow","transformOrFail","b3","NonEmpty","input","ast","parts","split","length","succeed","fail","Type","transform","optional","map","externalSpan","maxBodySize","globalValue","unsafeMake","none","withMaxBodySize","dual","size","locally","Size"],"sources":["../../../src/Http/IncomingMessage.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/cjs/Transferable.js b/dist/cjs/Transferable.js
index 5ffc87f9b7a328b603ac361064b8eae39437d0fa..b0d6d56d7208b7339b9743d3d519e4d80b50a226 100644
--- a/dist/cjs/Transferable.js
+++ b/dist/cjs/Transferable.js
@@ -88,7 +88,7 @@ const addAll = tranferables => Effect.flatMap(Effect.serviceOption(Collector), O
  * @category schema
  */
 exports.addAll = addAll;
-const schema = exports.schema = /*#__PURE__*/(0, _Function.dual)(2, (self, f) => Schema.transformOrFail(Schema.from(self), self, ParseResult.succeed, i => Effect.as(addAll(f(i)), i)));
+const schema = exports.schema = /*#__PURE__*/(0, _Function.dual)(2, (self, f) => Schema.transformOrFail(Schema.encodedSchema(self), self, ParseResult.succeed, i => Effect.as(addAll(f(i)), i)));
 /**
  * @since 1.0.0
  * @category schema
diff --git a/dist/cjs/Transferable.js.map b/dist/cjs/Transferable.js.map
index 9324547136f10cde6d3db8a544b6c57a4077dbbb..20ad06c0fe5b186548f2afb54bf6a2bf210ed247 100644
--- a/dist/cjs/Transferable.js.map
+++ b/dist/cjs/Transferable.js.map
@@ -1 +1 @@
-{"version":3,"file":"Transferable.js","names":["ParseResult","_interopRequireWildcard","require","Schema","Context","Effect","_Function","Option","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","Collector","Tag","exports","unsafeMakeCollector","tranferables","unsafeAddAll","transfers","transfer","push","unsafeRead","unsafeClear","length","of","addAll","transferables","sync","read","clear","makeCollector","flatMap","serviceOption","match","onNone","unit","onSome","_","schema","dual","self","f","transformOrFail","from","succeed","as","ImageData","any","data","buffer","MessagePort","Uint8Array","Uint8ArrayFromSelf"],"sources":["../../src/Transferable.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Transferable.js","names":["ParseResult","_interopRequireWildcard","require","Schema","Context","Effect","_Function","Option","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","Collector","Tag","exports","unsafeMakeCollector","tranferables","unsafeAddAll","transfers","transfer","push","unsafeRead","unsafeClear","length","of","addAll","transferables","sync","read","clear","makeCollector","flatMap","serviceOption","match","onNone","unit","onSome","_","schema","dual","self","f","transformOrFail","encodedSchema","succeed","as","ImageData","any","data","buffer","MessagePort","Uint8Array","Uint8ArrayFromSelf"],"sources":["../../src/Transferable.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/cjs/WorkerError.js.map b/dist/cjs/WorkerError.js.map
index 317e84bc39e3fe5a2f92f76dfe876cd93b589c39..c7d260fb3ab0ece52a3ed76462491c2b947f7efd 100644
--- a/dist/cjs/WorkerError.js.map
+++ b/dist/cjs/WorkerError.js.map
@@ -1 +1 @@
-{"version":3,"file":"WorkerError.js","names":["Schema","_interopRequireWildcard","require","Cause","_Function","Predicate","internal","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","WorkerErrorTypeId","exports","isWorkerError","hasProperty","causeDefectPretty","transform","unknown","identity","defect","isObject","pretty","die","String","WorkerError","TaggedError","reason","literal","error","cause","encodeCause","encodeSync","decodeCause","decodeSync","message"],"sources":["../../src/WorkerError.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"WorkerError.js","names":["Schema","_interopRequireWildcard","require","Cause","_Function","Predicate","internal","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","WorkerErrorTypeId","exports","isWorkerError","hasProperty","causeDefectPretty","transform","unknown","identity","defect","isObject","pretty","die","String","WorkerError","TaggedError","reason","literal","error","cause","encodeCause","encodeSync","decodeCause","decodeSync","message"],"sources":["../../src/WorkerError.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/cjs/internal/http/multipart.js b/dist/cjs/internal/http/multipart.js
index 20e3059e0ecd43b0f385fb2090b00c3c1ccad085..7c8014668abc2cfc321f4354b2165ab5a5618f7d 100644
--- a/dist/cjs/internal/http/multipart.js
+++ b/dist/cjs/internal/http/multipart.js
@@ -78,7 +78,7 @@ const fieldMimeTypes = exports.fieldMimeTypes = /*#__PURE__*/(0, _GlobalValue.gl
 /** @internal */
 const withFieldMimeTypes = exports.withFieldMimeTypes = /*#__PURE__*/(0, _Function.dual)(2, (effect, mimeTypes) => Effect.locally(effect, fieldMimeTypes, Chunk.fromIterable(mimeTypes)));
 const fileSchema = /*#__PURE__*/Schema.struct({
-  [TypeId]: /*#__PURE__*/Schema.uniqueSymbol(TypeId),
+  [TypeId]: /*#__PURE__*/Schema.uniqueSymbolFromSelf(TypeId),
   _tag: /*#__PURE__*/Schema.literal("PersistedFile"),
   key: Schema.string,
   name: Schema.string,
diff --git a/dist/cjs/internal/http/multipart.js.map b/dist/cjs/internal/http/multipart.js.map
index c7e00aea390e719fa41d7e14a4cdda2b5256261a..55843c0179d2cfbebc1c50212d0a318bea752641 100644
--- a/dist/cjs/internal/http/multipart.js.map
+++ b/dist/cjs/internal/http/multipart.js.map
@@ -1 +1 @@
-{"version":3,"file":"multipart.js","names":["Schema","_interopRequireWildcard","require","Cause","Channel","Chunk","Data","Effect","FiberRef","_Function","_GlobalValue","Option","Predicate","Queue","Stream","MP","FileSystem","IncomingMessage","Path","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","ErrorTypeId","MultipartError","reason","error","struct","_tag","isField","hasProperty","isTagged","maxParts","globalValue","unsafeMake","none","withMaxParts","dual","effect","count","locally","maxFieldSize","Size","withMaxFieldSize","size","maxFileSize","withMaxFileSize","map","fieldMimeTypes","make","withFieldMimeTypes","mimeTypes","fromIterable","fileSchema","uniqueSymbol","literal","key","string","name","contentType","path","filesSchema","array","schemaPersisted","schema","parse","decodeUnknown","persisted","schemaJson","fromJson","parseJson","field","_","makeConfig","headers","all","getOrUndefined","Number","maxPartSize","flow","maxTotalSize","maxBodySize","isFile","length","undefined","info","some","includes","defaultIsFile","makeChannel","bufferSize","acquireUseRelease","bounded","config","queue","makeFromQueue","shutdown","suspend","partsBuffer","partsFinished","input","awaitRead","unit","emit","element","offer","cause","done","_value","parser","onField","value","push","FieldImpl","decodeField","onFile","chunks","finished","take","zipRight","pump","chunk","unsafeFromArray","write","FileImpl","onError","error_","fail","convertError","onDone","flatMap","sync","end","forEach","buf","takeParts","parts","partsChannel","failCause","embedInput","limit","constructor","content","channel","filename","fromChannel","defaultWriteFile","file","fs","mapError","run","sink","toPersisted","stream","writeFile","pipe","Do","bind","makeTempDirectoryScoped","dir","path_","runFoldEffect","create","part","succeed","join","basename","slice","Array","isArray","PersistedFileImpl","as","catchTags","SystemError","err","BadArgument"],"sources":["../../../../src/internal/http/multipart.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"multipart.js","names":["Schema","_interopRequireWildcard","require","Cause","Channel","Chunk","Data","Effect","FiberRef","_Function","_GlobalValue","Option","Predicate","Queue","Stream","MP","FileSystem","IncomingMessage","Path","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","ErrorTypeId","MultipartError","reason","error","struct","_tag","isField","hasProperty","isTagged","maxParts","globalValue","unsafeMake","none","withMaxParts","dual","effect","count","locally","maxFieldSize","Size","withMaxFieldSize","size","maxFileSize","withMaxFileSize","map","fieldMimeTypes","make","withFieldMimeTypes","mimeTypes","fromIterable","fileSchema","uniqueSymbolFromSelf","literal","key","string","name","contentType","path","filesSchema","array","schemaPersisted","schema","parse","decodeUnknown","persisted","schemaJson","fromJson","parseJson","field","_","makeConfig","headers","all","getOrUndefined","Number","maxPartSize","flow","maxTotalSize","maxBodySize","isFile","length","undefined","info","some","includes","defaultIsFile","makeChannel","bufferSize","acquireUseRelease","bounded","config","queue","makeFromQueue","shutdown","suspend","partsBuffer","partsFinished","input","awaitRead","unit","emit","element","offer","cause","done","_value","parser","onField","value","push","FieldImpl","decodeField","onFile","chunks","finished","take","zipRight","pump","chunk","unsafeFromArray","write","FileImpl","onError","error_","fail","convertError","onDone","flatMap","sync","end","forEach","buf","takeParts","parts","partsChannel","failCause","embedInput","limit","constructor","content","channel","filename","fromChannel","defaultWriteFile","file","fs","mapError","run","sink","toPersisted","stream","writeFile","pipe","Do","bind","makeTempDirectoryScoped","dir","path_","runFoldEffect","create","part","succeed","join","basename","slice","Array","isArray","PersistedFileImpl","as","catchTags","SystemError","err","BadArgument"],"sources":["../../../../src/internal/http/multipart.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/dts/Worker.d.ts b/dist/dts/Worker.d.ts
index c1a666ad860242d7817466d55c1ffcbed295694f..b30c2fac2de6d7f8fb9c18192af330f8ec36e1e9 100644
--- a/dist/dts/Worker.d.ts
+++ b/dist/dts/Worker.d.ts
@@ -113,7 +113,7 @@ export declare namespace Worker {
      * @since 1.0.0
      * @category models
      */
-    type Response<E, O = unknown> = readonly [id: number, data: 0, ReadonlyArray<O>] | readonly [id: number, end: 1] | readonly [id: number, end: 1, ReadonlyArray<O>] | readonly [id: number, error: 2, E] | readonly [id: number, defect: 3, Schema.CauseFrom<WorkerErrorFrom>];
+    type Response<E, O = unknown> = readonly [id: number, data: 0, ReadonlyArray<O>] | readonly [id: number, end: 1] | readonly [id: number, end: 1, ReadonlyArray<O>] | readonly [id: number, error: 2, E] | readonly [id: number, defect: 3, Schema.CauseEncoded<WorkerErrorFrom>];
 }
 /**
  * @since 1.0.0
@@ -202,8 +202,8 @@ export declare const makePoolLayer: <Tag, I, E, O>(tag: Context.Tag<Tag, WorkerP
  */
 export interface SerializedWorker<I extends Schema.TaggedRequest.Any> {
     readonly id: number;
-    readonly execute: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer A> ? Stream.Stream<A, E | WorkerError | ParseResult.ParseError, R> : never;
-    readonly executeEffect: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer A> ? Effect.Effect<A, E | WorkerError | ParseResult.ParseError, R> : never;
+    readonly execute: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer A, infer _I, infer E, infer _EI, infer R> ? Stream.Stream<A, E | WorkerError | ParseResult.ParseError, R> : never;
+    readonly executeEffect: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer A, infer _I, infer E, infer _EI, infer R> ? Effect.Effect<A, E | WorkerError | ParseResult.ParseError, R> : never;
 }
 /**
  * @since 1.0.0
@@ -238,9 +238,9 @@ export declare namespace SerializedWorker {
  */
 export interface SerializedWorkerPool<I extends Schema.TaggedRequest.Any> {
     readonly backing: Pool.Pool<SerializedWorker<I>, WorkerError>;
-    readonly broadcast: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer _A> ? Effect.Effect<void, E | WorkerError | ParseResult.ParseError, R> : never;
-    readonly execute: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer A> ? Stream.Stream<A, E | WorkerError | ParseResult.ParseError, R> : never;
-    readonly executeEffect: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer A> ? Effect.Effect<A, E | WorkerError | ParseResult.ParseError, R> : never;
+    readonly broadcast: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer _A, infer _I, infer E, infer _EI, infer R> ? Effect.Effect<void, E | WorkerError | ParseResult.ParseError, R> : never;
+    readonly execute: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer A, infer _I, infer E, infer _EI, infer R> ? Stream.Stream<A, E | WorkerError | ParseResult.ParseError, R> : never;
+    readonly executeEffect: <Req extends I>(message: Req) => Req extends Serializable.WithResult<infer A, infer _I, infer E, infer _EI, infer R> ? Effect.Effect<A, E | WorkerError | ParseResult.ParseError, R> : never;
 }
 /**
  * @since 1.0.0
diff --git a/dist/dts/Worker.d.ts.map b/dist/dts/Worker.d.ts.map
index b55acb436b043349bfa8f8a8485933664872ccf9..ac6e0fc1375f8556c1aec5831c27b48de622dae1 100644
--- a/dist/dts/Worker.d.ts.map
+++ b/dist/dts/Worker.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"Worker.d.ts","sourceRoot":"","sources":["../../src/Worker.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Worker.d.ts","sourceRoot":"","sources":["../../src/Worker.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/dts/WorkerError.d.ts b/dist/dts/WorkerError.d.ts
index 361d74eaed1f2b8b12dec5a91264a21632818d21..5c8e6473e8050246ebebb85dc66b37a48d7e9997 100644
--- a/dist/dts/WorkerError.d.ts
+++ b/dist/dts/WorkerError.d.ts
@@ -18,7 +18,12 @@ export type WorkerErrorTypeId = typeof WorkerErrorTypeId;
  * @category predicates
  */
 export declare const isWorkerError: (u: unknown) => u is WorkerError;
-declare const WorkerError_base: Schema.Class<{
+declare const WorkerError_base: Schema.Class<WorkerError, {
+    readonly _tag: Schema.literal<["WorkerError"]>;
+} & {
+    reason: Schema.literal<["spawn", "decode", "send", "unknown", "encode"]>;
+    error: Schema.Schema<unknown, unknown, never>;
+}, {
     readonly _tag: "WorkerError";
     readonly reason: "spawn" | "decode" | "send" | "unknown" | "encode";
     readonly error: unknown;
@@ -29,7 +34,7 @@ declare const WorkerError_base: Schema.Class<{
 }, never, {
     readonly reason: "spawn" | "decode" | "send" | "unknown" | "encode";
     readonly error: unknown;
-}, WorkerError, {}, Cause.YieldableError>;
+}, {}, Cause.YieldableError>;
 /**
  * @since 1.0.0
  * @category errors
@@ -42,15 +47,15 @@ export declare class WorkerError extends WorkerError_base {
     /**
      * @since 1.0.0
      */
-    static readonly Cause: Schema.Schema<Cause.Cause<WorkerError>, Schema.CauseFrom<WorkerErrorFrom>>;
+    static readonly Cause: Schema.Schema<Cause.Cause<WorkerError>, Schema.CauseEncoded<WorkerErrorFrom>>;
     /**
      * @since 1.0.0
      */
-    static readonly encodeCause: (a: Cause.Cause<WorkerError>) => Schema.CauseFrom<WorkerErrorFrom>;
+    static readonly encodeCause: (a: Cause.Cause<WorkerError>) => Schema.CauseEncoded<WorkerErrorFrom>;
     /**
      * @since 1.0.0
      */
-    static readonly decodeCause: (u: Schema.CauseFrom<WorkerErrorFrom>) => Cause.Cause<WorkerError>;
+    static readonly decodeCause: (u: Schema.CauseEncoded<WorkerErrorFrom>) => Cause.Cause<WorkerError>;
     /**
      * @since 1.0.0
      */
diff --git a/dist/dts/WorkerError.d.ts.map b/dist/dts/WorkerError.d.ts.map
index 35be9fd67bfd54908cf0ce4ecd2272a65e0b62ff..f5027e65a397dd4229f4f55952820626edc05201 100644
--- a/dist/dts/WorkerError.d.ts.map
+++ b/dist/dts/WorkerError.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"WorkerError.d.ts","sourceRoot":"","sources":["../../src/WorkerError.ts"],"names":[],"mappings":"AAAA;;GAEG;AACH,OAAO,KAAK,MAAM,MAAM,uBAAuB,CAAA;AAC/C,OAAO,KAAK,KAAK,MAAM,cAAc,CAAA;AAKrC;;;GAGG;AACH,eAAO,MAAM,iBAAiB,EAAE,OAAO,MAAmC,CAAA;AAE1E;;;GAGG;AACH,MAAM,MAAM,iBAAiB,GAAG,OAAO,iBAAiB,CAAA;AAExD;;;GAGG;AACH,eAAO,MAAM,aAAa,MAAO,OAAO,qBAAkE,CAAA;;;;;;;;;;;;;AAc1G;;;GAGG;AACH,qBAAa,WAAY,SAAQ,gBAG/B;IACA;;OAEG;IACH,QAAQ,CAAC,CAAC,iBAAiB,CAAC,EAAE,iBAAiB,CAAoB;IAEnE;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAClC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,EACxB,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,CAClC,CAA2D;IAE5D;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,CAE9F;IAED;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,KAAK,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAE9F;IAED;;OAEG;IACH,IAAI,OAAO,WAEV;CACF;AAED;;;GAGG;AACH,MAAM,WAAW,eAAe;IAC9B,QAAQ,CAAC,IAAI,EAAE,aAAa,CAAA;IAC5B,QAAQ,CAAC,MAAM,EAAE,OAAO,GAAG,QAAQ,GAAG,MAAM,GAAG,SAAS,GAAG,QAAQ,CAAA;IACnE,QAAQ,CAAC,KAAK,EAAE,OAAO,CAAA;CACxB"}
\ No newline at end of file
+{"version":3,"file":"WorkerError.d.ts","sourceRoot":"","sources":["../../src/WorkerError.ts"],"names":[],"mappings":"AAAA;;GAEG;AACH,OAAO,KAAK,MAAM,MAAM,uBAAuB,CAAA;AAC/C,OAAO,KAAK,KAAK,MAAM,cAAc,CAAA;AAKrC;;;GAGG;AACH,eAAO,MAAM,iBAAiB,EAAE,OAAO,MAAmC,CAAA;AAE1E;;;GAGG;AACH,MAAM,MAAM,iBAAiB,GAAG,OAAO,iBAAiB,CAAA;AAExD;;;GAGG;AACH,eAAO,MAAM,aAAa,MAAO,OAAO,qBAAkE,CAAA;;;;;;;;;;;;;;;;;;AAc1G;;;GAGG;AACH,qBAAa,WAAY,SAAQ,gBAG/B;IACA;;OAEG;IACH,QAAQ,CAAC,CAAC,iBAAiB,CAAC,EAAE,iBAAiB,CAAoB;IAEnE;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAClC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,EACxB,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CACrC,CAA2D;IAE5D;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CAG/F;IAEH;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAG/F;IAEH;;OAEG;IACH,IAAI,OAAO,WAEV;CACF;AAED;;;GAGG;AACH,MAAM,WAAW,eAAe;IAC9B,QAAQ,CAAC,IAAI,EAAE,aAAa,CAAA;IAC5B,QAAQ,CAAC,MAAM,EAAE,OAAO,GAAG,QAAQ,GAAG,MAAM,GAAG,SAAS,GAAG,QAAQ,CAAA;IACnE,QAAQ,CAAC,KAAK,EAAE,OAAO,CAAA;CACxB"}
\ No newline at end of file
diff --git a/dist/dts/WorkerRunner.d.ts b/dist/dts/WorkerRunner.d.ts
index fbd4ae26073b45cbff6e30d9a949eafce0cd53ef..819262178ce4db67258b630834198c2e74f09343 100644
--- a/dist/dts/WorkerRunner.d.ts
+++ b/dist/dts/WorkerRunner.d.ts
@@ -89,7 +89,7 @@ export declare namespace SerializedRunner {
     type Handlers<A extends Schema.TaggedRequest.Any> = {
         readonly [K in A["_tag"]]: Extract<A, {
             readonly _tag: K;
-        }> extends Serializable.SerializableWithResult<infer _RS, infer _IS, infer S, infer _RR, infer _IE, infer E, infer _IO, infer O> ? (_: S) => Stream.Stream<O, E, any> | Effect.Effect<O, E, any> | Layer.Layer<any, E, any> | Layer.Layer<never, E, any> : never;
+        }> extends Serializable.SerializableWithResult<infer S, infer _SI, infer _SR, infer A, infer _AI, infer E, infer _EI, infer _RR> ? (_: S) => Stream.Stream<A, E, any> | Effect.Effect<A, E, any> | Layer.Layer<any, E, any> | Layer.Layer<never, E, any> : never;
     };
     /**
      * @since 1.0.0
diff --git a/dist/dts/WorkerRunner.d.ts.map b/dist/dts/WorkerRunner.d.ts.map
index af1e5217fcca496833f6812d42236cff3c6d8867..4e7b6c0e1b07c5fd2e85177a73b9c912e392cb1a 100644
--- a/dist/dts/WorkerRunner.d.ts.map
+++ b/dist/dts/WorkerRunner.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"WorkerRunner.d.ts","sourceRoot":"","sources":["../../src/WorkerRunner.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"WorkerRunner.d.ts","sourceRoot":"","sources":["../../src/WorkerRunner.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/esm/Http/IncomingMessage.js b/dist/esm/Http/IncomingMessage.js
index e505ca890c48c190c868265650310136ac076e27..ad5c74d38519f1d71cce4b4c2cf8030b56843c36 100644
--- a/dist/esm/Http/IncomingMessage.js
+++ b/dist/esm/Http/IncomingMessage.js
@@ -85,7 +85,7 @@ export const schemaExternalSpan = /*#__PURE__*/flow( /*#__PURE__*/schemaHeaders(
       parentSpanId: parts[3]
     });
   }
-  return ParseResult.fail(ParseResult.type(ast, input));
+  return ParseResult.fail(new ParseResult.Type(ast, input));
 }, _ => ParseResult.succeed({
   b3: ""
 })), /*#__PURE__*/Schema.transform( /*#__PURE__*/Schema.struct({
diff --git a/dist/esm/Http/IncomingMessage.js.map b/dist/esm/Http/IncomingMessage.js.map
index 0d28571346c06a8589744378f1b19add39daf194..388458ff167dbddb3a09bc00ea2c1135b8a7acf6 100644
--- a/dist/esm/Http/IncomingMessage.js.map
+++ b/dist/esm/Http/IncomingMessage.js.map
@@ -1 +1 @@
-{"version":3,"file":"IncomingMessage.js","names":["ParseResult","Schema","Effect","FiberRef","dual","flow","Global","Option","Tracer","FileSystem","TypeId","Symbol","for","schemaBodyJson","schema","parse","decodeUnknown","self","flatMap","json","schemaBodyJsonEffect","decode","effect","scoped","schemaBodyUrlParams","urlParamsBody","_","Object","fromEntries","schemaBodyUrlParamsEffect","schemaHeaders","headers","schemaHeadersEffect","SpanSchema","struct","traceId","string","spanId","parentSpanId","union","undefined","sampled","boolean","schemaExternalSpan","transformOrFail","b3","NonEmpty","input","ast","parts","split","length","succeed","fail","type","transform","optional","default","map","externalSpan","maxBodySize","globalValue","unsafeMake","none","withMaxBodySize","size","locally","Size"],"sources":["../../../src/Http/IncomingMessage.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"IncomingMessage.js","names":["ParseResult","Schema","Effect","FiberRef","dual","flow","Global","Option","Tracer","FileSystem","TypeId","Symbol","for","schemaBodyJson","schema","parse","decodeUnknown","self","flatMap","json","schemaBodyJsonEffect","decode","effect","scoped","schemaBodyUrlParams","urlParamsBody","_","Object","fromEntries","schemaBodyUrlParamsEffect","schemaHeaders","headers","schemaHeadersEffect","SpanSchema","struct","traceId","string","spanId","parentSpanId","union","undefined","sampled","boolean","schemaExternalSpan","transformOrFail","b3","NonEmpty","input","ast","parts","split","length","succeed","fail","Type","transform","optional","default","map","externalSpan","maxBodySize","globalValue","unsafeMake","none","withMaxBodySize","size","locally","Size"],"sources":["../../../src/Http/IncomingMessage.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/esm/Transferable.js b/dist/esm/Transferable.js
index b50ff68a028a32c1cce4ac544503dc46964aff4e..259b66cd9e4968bf5738bf572ca15e4b930e2f90 100644
--- a/dist/esm/Transferable.js
+++ b/dist/esm/Transferable.js
@@ -53,7 +53,7 @@ export const addAll = tranferables => Effect.flatMap(Effect.serviceOption(Collec
  * @since 1.0.0
  * @category schema
  */
-export const schema = /*#__PURE__*/dual(2, (self, f) => Schema.transformOrFail(Schema.from(self), self, ParseResult.succeed, i => Effect.as(addAll(f(i)), i)));
+export const schema = /*#__PURE__*/dual(2, (self, f) => Schema.transformOrFail(Schema.encodedSchema(self), self, ParseResult.succeed, i => Effect.as(addAll(f(i)), i)));
 /**
  * @since 1.0.0
  * @category schema
diff --git a/dist/esm/Transferable.js.map b/dist/esm/Transferable.js.map
index 46785fd9b06e1938d26a2d1d911c39cdeb9f2ea8..29747fa96b21a865a3751c8802786186a58998a4 100644
--- a/dist/esm/Transferable.js.map
+++ b/dist/esm/Transferable.js.map
@@ -1 +1 @@
-{"version":3,"file":"Transferable.js","names":["ParseResult","Schema","Context","Effect","dual","Option","Collector","Tag","unsafeMakeCollector","tranferables","unsafeAddAll","transfers","transfer","push","unsafeRead","unsafeClear","length","of","addAll","transferables","sync","read","clear","makeCollector","flatMap","serviceOption","match","onNone","unit","onSome","_","schema","self","f","transformOrFail","from","succeed","i","as","ImageData","any","data","buffer","MessagePort","Uint8Array","Uint8ArrayFromSelf"],"sources":["../../src/Transferable.ts"],"sourcesContent":[null],"mappings":"AAAA;;;AAGA,OAAO,KAAKA,WAAW,MAAM,4BAA4B;AACzD,OAAO,KAAKC,MAAM,MAAM,uBAAuB;AAC/C,OAAO,KAAKC,OAAO,MAAM,gBAAgB;AACzC,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,SAASC,IAAI,QAAQ,iBAAiB;AACtC,OAAO,KAAKC,MAAM,MAAM,eAAe;AAevC;;;;AAIA,OAAM,MAAOC,SAAU,SAAQJ,OAAO,CAACK,GAAG,CAAC,yCAAyC,CAAC,EAGlF;AAEH;;;;AAIA,OAAO,MAAMC,mBAAmB,GAAGA,CAAA,KAAuB;EACxD,MAAMC,YAAY,GAAmC,EAAE;EACvD,MAAMC,YAAY,GAAIC,SAA4C,IAAU;IAC1E,KAAK,MAAMC,QAAQ,IAAID,SAAS,EAAE;MAChCF,YAAY,CAACI,IAAI,CAACD,QAAQ,CAAC;IAC7B;EACF,CAAC;EACD,MAAME,UAAU,GAAGA,CAAA,KAA8CL,YAAY;EAC7E,MAAMM,WAAW,GAAGA,CAAA,KAAW;IAC7BN,YAAY,CAACO,MAAM,GAAG,CAAC;EACzB,CAAC;EACD,OAAOV,SAAS,CAACW,EAAE,CAAC;IAClBP,YAAY;IACZQ,MAAM,EAAGC,aAAa,IAAKhB,MAAM,CAACiB,IAAI,CAAC,MAAMV,YAAY,CAACS,aAAa,CAAC,CAAC;IACzEL,UAAU;IACVO,IAAI,EAAElB,MAAM,CAACiB,IAAI,CAACN,UAAU,CAAC;IAC7BC,WAAW;IACXO,KAAK,EAAEnB,MAAM,CAACiB,IAAI,CAACL,WAAW;GAC/B,CAAC;AACJ,CAAC;AAED;;;;AAIA,OAAO,MAAMQ,aAAa,gBAAoCpB,MAAM,CAACiB,IAAI,CAACZ,mBAAmB,CAAC;AAE9F;;;;AAIA,OAAO,MAAMU,MAAM,GAAIT,YAA+C,IACpEN,MAAM,CAACqB,OAAO,CACZrB,MAAM,CAACsB,aAAa,CAACnB,SAAS,CAAC,EAC/BD,MAAM,CAACqB,KAAK,CAAC;EACXC,MAAM,EAAEA,CAAA,KAAMxB,MAAM,CAACyB,IAAI;EACzBC,MAAM,EAAGC,CAAC,IAAKA,CAAC,CAACZ,MAAM,CAACT,YAAY;CACrC,CAAC,CACH;AAEH;;;;AAIA,OAAO,MAAMsB,MAAM,gBAQf3B,IAAI,CAAC,CAAC,EAAE,CACV4B,IAA4B,EAC5BC,CAA8C,KAE9ChC,MAAM,CAACiC,eAAe,CACpBjC,MAAM,CAACkC,IAAI,CAACH,IAAI,CAAC,EACjBA,IAAI,EACJhC,WAAW,CAACoC,OAAO,EAClBC,CAAC,IAAKlC,MAAM,CAACmC,EAAE,CAACpB,MAAM,CAACe,CAAC,CAACI,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAClC,CAAC;AAEJ;;;;AAIA,OAAO,MAAME,SAAS,gBAA6BR,MAAM,CACvD9B,MAAM,CAACuC,GAAG,EACTV,CAAC,IAAK,CAAEA,CAAe,CAACW,IAAI,CAACC,MAAM,CAAC,CACtC;AAED;;;;AAIA,OAAO,MAAMC,WAAW,gBAA+BZ,MAAM,CAC3D9B,MAAM,CAACuC,GAAG,EACTV,CAAC,IAAK,CAACA,CAAgB,CAAC,CAC1B;AAED;;;;AAIA,OAAO,MAAMc,UAAU,gBAA8Bb,MAAM,CACzD9B,MAAM,CAAC4C,kBAAkB,EACxBf,CAAC,IAAK,CAACA,CAAC,CAACY,MAAM,CAAC,CAClB"}
\ No newline at end of file
+{"version":3,"file":"Transferable.js","names":["ParseResult","Schema","Context","Effect","dual","Option","Collector","Tag","unsafeMakeCollector","tranferables","unsafeAddAll","transfers","transfer","push","unsafeRead","unsafeClear","length","of","addAll","transferables","sync","read","clear","makeCollector","flatMap","serviceOption","match","onNone","unit","onSome","_","schema","self","f","transformOrFail","encodedSchema","succeed","i","as","ImageData","any","data","buffer","MessagePort","Uint8Array","Uint8ArrayFromSelf"],"sources":["../../src/Transferable.ts"],"sourcesContent":[null],"mappings":"AAAA;;;AAGA,OAAO,KAAKA,WAAW,MAAM,4BAA4B;AACzD,OAAO,KAAKC,MAAM,MAAM,uBAAuB;AAC/C,OAAO,KAAKC,OAAO,MAAM,gBAAgB;AACzC,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,SAASC,IAAI,QAAQ,iBAAiB;AACtC,OAAO,KAAKC,MAAM,MAAM,eAAe;AAevC;;;;AAIA,OAAM,MAAOC,SAAU,SAAQJ,OAAO,CAACK,GAAG,CAAC,yCAAyC,CAAC,EAGlF;AAEH;;;;AAIA,OAAO,MAAMC,mBAAmB,GAAGA,CAAA,KAAuB;EACxD,MAAMC,YAAY,GAAmC,EAAE;EACvD,MAAMC,YAAY,GAAIC,SAA4C,IAAU;IAC1E,KAAK,MAAMC,QAAQ,IAAID,SAAS,EAAE;MAChCF,YAAY,CAACI,IAAI,CAACD,QAAQ,CAAC;IAC7B;EACF,CAAC;EACD,MAAME,UAAU,GAAGA,CAAA,KAA8CL,YAAY;EAC7E,MAAMM,WAAW,GAAGA,CAAA,KAAW;IAC7BN,YAAY,CAACO,MAAM,GAAG,CAAC;EACzB,CAAC;EACD,OAAOV,SAAS,CAACW,EAAE,CAAC;IAClBP,YAAY;IACZQ,MAAM,EAAGC,aAAa,IAAKhB,MAAM,CAACiB,IAAI,CAAC,MAAMV,YAAY,CAACS,aAAa,CAAC,CAAC;IACzEL,UAAU;IACVO,IAAI,EAAElB,MAAM,CAACiB,IAAI,CAACN,UAAU,CAAC;IAC7BC,WAAW;IACXO,KAAK,EAAEnB,MAAM,CAACiB,IAAI,CAACL,WAAW;GAC/B,CAAC;AACJ,CAAC;AAED;;;;AAIA,OAAO,MAAMQ,aAAa,gBAAoCpB,MAAM,CAACiB,IAAI,CAACZ,mBAAmB,CAAC;AAE9F;;;;AAIA,OAAO,MAAMU,MAAM,GAAIT,YAA+C,IACpEN,MAAM,CAACqB,OAAO,CACZrB,MAAM,CAACsB,aAAa,CAACnB,SAAS,CAAC,EAC/BD,MAAM,CAACqB,KAAK,CAAC;EACXC,MAAM,EAAEA,CAAA,KAAMxB,MAAM,CAACyB,IAAI;EACzBC,MAAM,EAAGC,CAAC,IAAKA,CAAC,CAACZ,MAAM,CAACT,YAAY;CACrC,CAAC,CACH;AAEH;;;;AAIA,OAAO,MAAMsB,MAAM,gBAQf3B,IAAI,CAAC,CAAC,EAAE,CACV4B,IAA4B,EAC5BC,CAA8C,KAE9ChC,MAAM,CAACiC,eAAe,CACpBjC,MAAM,CAACkC,aAAa,CAACH,IAAI,CAAC,EAC1BA,IAAI,EACJhC,WAAW,CAACoC,OAAO,EAClBC,CAAC,IAAKlC,MAAM,CAACmC,EAAE,CAACpB,MAAM,CAACe,CAAC,CAACI,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAClC,CAAC;AAEJ;;;;AAIA,OAAO,MAAME,SAAS,gBAA6BR,MAAM,CACvD9B,MAAM,CAACuC,GAAG,EACTV,CAAC,IAAK,CAAEA,CAAe,CAACW,IAAI,CAACC,MAAM,CAAC,CACtC;AAED;;;;AAIA,OAAO,MAAMC,WAAW,gBAA+BZ,MAAM,CAC3D9B,MAAM,CAACuC,GAAG,EACTV,CAAC,IAAK,CAACA,CAAgB,CAAC,CAC1B;AAED;;;;AAIA,OAAO,MAAMc,UAAU,gBAA8Bb,MAAM,CACzD9B,MAAM,CAAC4C,kBAAkB,EACxBf,CAAC,IAAK,CAACA,CAAC,CAACY,MAAM,CAAC,CAClB"}
\ No newline at end of file
diff --git a/dist/esm/WorkerError.js.map b/dist/esm/WorkerError.js.map
index 5c757bb4515dcdcd7b9be8a07e4d00416c658724..b318fb812568eac6001bc79a7442c2555a1fa2be 100644
--- a/dist/esm/WorkerError.js.map
+++ b/dist/esm/WorkerError.js.map
@@ -1 +1 @@
-{"version":3,"file":"WorkerError.js","names":["Schema","Cause","identity","Predicate","internal","WorkerErrorTypeId","isWorkerError","u","hasProperty","causeDefectPretty","transform","unknown","defect","isObject","pretty","die","String","WorkerError","TaggedError","reason","literal","error","cause","encodeCause","encodeSync","decodeCause","decodeSync","message"],"sources":["../../src/WorkerError.ts"],"sourcesContent":[null],"mappings":"AAAA;;;AAGA,OAAO,KAAKA,MAAM,MAAM,uBAAuB;AAC/C,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,OAAO,KAAKC,SAAS,MAAM,kBAAkB;AAC7C,OAAO,KAAKC,QAAQ,MAAM,2BAA2B;AAErD;;;;AAIA,OAAO,MAAMC,iBAAiB,GAAkBD,QAAQ,CAACC,iBAAiB;AAQ1E;;;;AAIA,OAAO,MAAMC,aAAa,GAAIC,CAAU,IAAuBJ,SAAS,CAACK,WAAW,CAACD,CAAC,EAAEF,iBAAiB,CAAC;AAE1G,MAAMI,iBAAiB,gBAA2BT,MAAM,CAACU,SAAS,CAChEV,MAAM,CAACW,OAAO,EACdX,MAAM,CAACW,OAAO,EACdT,QAAQ,EACPU,MAAM,IAAI;EACT,IAAIT,SAAS,CAACU,QAAQ,CAACD,MAAM,CAAC,EAAE;IAC9B,OAAOX,KAAK,CAACa,MAAM,CAACb,KAAK,CAACc,GAAG,CAACH,MAAM,CAAC,CAAC;EACxC;EACA,OAAOI,MAAM,CAACJ,MAAM,CAAC;AACvB,CAAC,CACF;AAED;;;;AAIA,OAAM,MAAOK,WAAY,SAAQjB,MAAM,CAACkB,WAAW,EAAe,CAAC,aAAa,EAAE;EAChFC,MAAM,EAAEnB,MAAM,CAACoB,OAAO,CAAC,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,CAAC;EACtEC,KAAK,EAAEZ;CACR,CAAC;EACA;;;EAGS,CAACJ,iBAAiB,IAAuBA,iBAAiB;EAEnE;;;EAGA,OAAgBJ,KAAK,GAGjBD,MAAM,CAACsB,KAAK,CAAC;IAAEV,MAAM,EAAEH,iBAAiB;IAAEY,KAAK,EAAE;EAAI,CAAE,CAAC;EAE5D;;;EAGA,OAAgBE,WAAW,GAAuEvB,MAAM,CAACwB,UAAU,CACjH,IAAI,CAACvB,KAAK,CACX;EAED;;;EAGA,OAAgBwB,WAAW,GAAuEzB,MAAM,CAAC0B,UAAU,CACjH,IAAI,CAACzB,KAAK,CACX;EAED;;;EAGA,IAAI0B,OAAOA,CAAA;IACT,OAAO,GAAG,IAAI,CAACR,MAAM,KAAKH,MAAM,CAAC,IAAI,CAACK,KAAK,CAAC,EAAE;EAChD"}
\ No newline at end of file
+{"version":3,"file":"WorkerError.js","names":["Schema","Cause","identity","Predicate","internal","WorkerErrorTypeId","isWorkerError","u","hasProperty","causeDefectPretty","transform","unknown","defect","isObject","pretty","die","String","WorkerError","TaggedError","reason","literal","error","cause","encodeCause","encodeSync","decodeCause","decodeSync","message"],"sources":["../../src/WorkerError.ts"],"sourcesContent":[null],"mappings":"AAAA;;;AAGA,OAAO,KAAKA,MAAM,MAAM,uBAAuB;AAC/C,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,OAAO,KAAKC,SAAS,MAAM,kBAAkB;AAC7C,OAAO,KAAKC,QAAQ,MAAM,2BAA2B;AAErD;;;;AAIA,OAAO,MAAMC,iBAAiB,GAAkBD,QAAQ,CAACC,iBAAiB;AAQ1E;;;;AAIA,OAAO,MAAMC,aAAa,GAAIC,CAAU,IAAuBJ,SAAS,CAACK,WAAW,CAACD,CAAC,EAAEF,iBAAiB,CAAC;AAE1G,MAAMI,iBAAiB,gBAA2BT,MAAM,CAACU,SAAS,CAChEV,MAAM,CAACW,OAAO,EACdX,MAAM,CAACW,OAAO,EACdT,QAAQ,EACPU,MAAM,IAAI;EACT,IAAIT,SAAS,CAACU,QAAQ,CAACD,MAAM,CAAC,EAAE;IAC9B,OAAOX,KAAK,CAACa,MAAM,CAACb,KAAK,CAACc,GAAG,CAACH,MAAM,CAAC,CAAC;EACxC;EACA,OAAOI,MAAM,CAACJ,MAAM,CAAC;AACvB,CAAC,CACF;AAED;;;;AAIA,OAAM,MAAOK,WAAY,SAAQjB,MAAM,CAACkB,WAAW,EAAe,CAAC,aAAa,EAAE;EAChFC,MAAM,EAAEnB,MAAM,CAACoB,OAAO,CAAC,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,CAAC;EACtEC,KAAK,EAAEZ;CACR,CAAC;EACA;;;EAGS,CAACJ,iBAAiB,IAAuBA,iBAAiB;EAEnE;;;EAGA,OAAgBJ,KAAK,GAGjBD,MAAM,CAACsB,KAAK,CAAC;IAAEV,MAAM,EAAEH,iBAAiB;IAAEY,KAAK,EAAE;EAAI,CAAE,CAAC;EAE5D;;;EAGA,OAAgBE,WAAW,GAA0EvB,MAAM,CACxGwB,UAAU,CACT,IAAI,CAACvB,KAAK,CACX;EAEH;;;EAGA,OAAgBwB,WAAW,GAA0EzB,MAAM,CACxG0B,UAAU,CACT,IAAI,CAACzB,KAAK,CACX;EAEH;;;EAGA,IAAI0B,OAAOA,CAAA;IACT,OAAO,GAAG,IAAI,CAACR,MAAM,KAAKH,MAAM,CAAC,IAAI,CAACK,KAAK,CAAC,EAAE;EAChD"}
\ No newline at end of file
diff --git a/dist/esm/internal/http/multipart.js b/dist/esm/internal/http/multipart.js
index 51eed4dd74f939e53b6b902be7e5f757bcca468a..39efca21364c4463b4a4a036268cc7413d48d0e2 100644
--- a/dist/esm/internal/http/multipart.js
+++ b/dist/esm/internal/http/multipart.js
@@ -45,7 +45,7 @@ export const fieldMimeTypes = /*#__PURE__*/globalValue("@effect/platform/Http/Mu
 /** @internal */
 export const withFieldMimeTypes = /*#__PURE__*/dual(2, (effect, mimeTypes) => Effect.locally(effect, fieldMimeTypes, Chunk.fromIterable(mimeTypes)));
 const fileSchema = /*#__PURE__*/Schema.struct({
-  [TypeId]: /*#__PURE__*/Schema.uniqueSymbol(TypeId),
+  [TypeId]: /*#__PURE__*/Schema.uniqueSymbolFromSelf(TypeId),
   _tag: /*#__PURE__*/Schema.literal("PersistedFile"),
   key: Schema.string,
   name: Schema.string,
diff --git a/dist/esm/internal/http/multipart.js.map b/dist/esm/internal/http/multipart.js.map
index 612bd7a9b8f4bde74693eba9952b23dee0bfa99c..01a5bc09d3b604a4d54f0358ca0e469fefdd23b8 100644
--- a/dist/esm/internal/http/multipart.js.map
+++ b/dist/esm/internal/http/multipart.js.map
@@ -1 +1 @@
-{"version":3,"file":"multipart.js","names":["Schema","Cause","Channel","Chunk","Data","Effect","FiberRef","dual","flow","pipe","globalValue","Option","Predicate","Queue","Stream","MP","FileSystem","IncomingMessage","Path","TypeId","Symbol","for","ErrorTypeId","MultipartError","reason","error","struct","_tag","isField","u","hasProperty","isTagged","maxParts","unsafeMake","none","withMaxParts","effect","count","locally","maxFieldSize","Size","withMaxFieldSize","size","maxFileSize","withMaxFileSize","map","fieldMimeTypes","make","withFieldMimeTypes","mimeTypes","fromIterable","fileSchema","uniqueSymbol","literal","key","string","name","contentType","path","filesSchema","array","schemaPersisted","schema","parse","decodeUnknown","persisted","schemaJson","fromJson","parseJson","field","_","makeConfig","headers","all","get","getOrUndefined","Number","maxPartSize","maxTotalSize","maxBodySize","isFile","length","undefined","info","some","includes","defaultIsFile","makeChannel","bufferSize","acquireUseRelease","bounded","config","queue","makeFromQueue","shutdown","suspend","partsBuffer","partsFinished","input","awaitRead","unit","emit","element","offer","cause","done","_value","parser","onField","value","push","FieldImpl","decodeField","onFile","chunks","finished","take","zipRight","pump","chunk","unsafeFromArray","write","FileImpl","onError","error_","fail","convertError","onDone","flatMap","sync","end","forEach","buf","takeParts","parts","partsChannel","failCause","embedInput","limit","constructor","content","channel","filename","fromChannel","defaultWriteFile","file","fs","mapError","run","sink","toPersisted","stream","writeFile","Do","bind","makeTempDirectoryScoped","dir","path_","runFoldEffect","Object","create","part","succeed","join","basename","slice","Array","isArray","PersistedFileImpl","as","catchTags","SystemError","err","BadArgument"],"sources":["../../../../src/internal/http/multipart.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"multipart.js","names":["Schema","Cause","Channel","Chunk","Data","Effect","FiberRef","dual","flow","pipe","globalValue","Option","Predicate","Queue","Stream","MP","FileSystem","IncomingMessage","Path","TypeId","Symbol","for","ErrorTypeId","MultipartError","reason","error","struct","_tag","isField","u","hasProperty","isTagged","maxParts","unsafeMake","none","withMaxParts","effect","count","locally","maxFieldSize","Size","withMaxFieldSize","size","maxFileSize","withMaxFileSize","map","fieldMimeTypes","make","withFieldMimeTypes","mimeTypes","fromIterable","fileSchema","uniqueSymbolFromSelf","literal","key","string","name","contentType","path","filesSchema","array","schemaPersisted","schema","parse","decodeUnknown","persisted","schemaJson","fromJson","parseJson","field","_","makeConfig","headers","all","get","getOrUndefined","Number","maxPartSize","maxTotalSize","maxBodySize","isFile","length","undefined","info","some","includes","defaultIsFile","makeChannel","bufferSize","acquireUseRelease","bounded","config","queue","makeFromQueue","shutdown","suspend","partsBuffer","partsFinished","input","awaitRead","unit","emit","element","offer","cause","done","_value","parser","onField","value","push","FieldImpl","decodeField","onFile","chunks","finished","take","zipRight","pump","chunk","unsafeFromArray","write","FileImpl","onError","error_","fail","convertError","onDone","flatMap","sync","end","forEach","buf","takeParts","parts","partsChannel","failCause","embedInput","limit","constructor","content","channel","filename","fromChannel","defaultWriteFile","file","fs","mapError","run","sink","toPersisted","stream","writeFile","Do","bind","makeTempDirectoryScoped","dir","path_","runFoldEffect","Object","create","part","succeed","join","basename","slice","Array","isArray","PersistedFileImpl","as","catchTags","SystemError","err","BadArgument"],"sources":["../../../../src/internal/http/multipart.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
diff --git a/src/Http/IncomingMessage.ts b/src/Http/IncomingMessage.ts
index d4632bc6cb9eae6e1f3b10b3442f5bd83a30d238..bf265045234bb58bca160dfa5f745556121fe357 100644
--- a/src/Http/IncomingMessage.ts
+++ b/src/Http/IncomingMessage.ts
@@ -136,7 +136,7 @@ export const schemaExternalSpan: <E>(
             } as const
           )
         }
-        return ParseResult.fail(ParseResult.type(ast, input))
+        return ParseResult.fail(new ParseResult.Type(ast, input))
       },
       (_) => ParseResult.succeed({ b3: "" } as const)
     ),
diff --git a/src/Transferable.ts b/src/Transferable.ts
index 85e938c39f07f22b27f934d763cbcc3b6ecbf746..a59977b957bb2d4f7197af4cb84aaf65473085b5 100644
--- a/src/Transferable.ts
+++ b/src/Transferable.ts
@@ -91,7 +91,7 @@ export const schema: {
   f: (_: I) => Iterable<globalThis.Transferable>
 ) =>
   Schema.transformOrFail(
-    Schema.from(self),
+    Schema.encodedSchema(self),
     self,
     ParseResult.succeed,
     (i) => Effect.as(addAll(f(i)), i)
diff --git a/src/Worker.ts b/src/Worker.ts
index 38a992a78ba9c871b72932f658002f73cb986a0a..fdadcf06309715428571dfc75e9bc0a114cc6167 100644
--- a/src/Worker.ts
+++ b/src/Worker.ts
@@ -134,7 +134,7 @@ export declare namespace Worker {
     | readonly [id: number, end: 1]
     | readonly [id: number, end: 1, ReadonlyArray<O>]
     | readonly [id: number, error: 2, E]
-    | readonly [id: number, defect: 3, Schema.CauseFrom<WorkerErrorFrom>]
+    | readonly [id: number, defect: 3, Schema.CauseEncoded<WorkerErrorFrom>]
 }
 
 /**
@@ -246,12 +246,12 @@ export interface SerializedWorker<I extends Schema.TaggedRequest.Any> {
   readonly id: number
   readonly execute: <Req extends I>(
     message: Req
-  ) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer A>
+  ) => Req extends Serializable.WithResult<infer A, infer _I, infer E, infer _EI, infer R>
     ? Stream.Stream<A, E | WorkerError | ParseResult.ParseError, R>
     : never
   readonly executeEffect: <Req extends I>(
     message: Req
-  ) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer A>
+  ) => Req extends Serializable.WithResult<infer A, infer _I, infer E, infer _EI, infer R>
     ? Effect.Effect<A, E | WorkerError | ParseResult.ParseError, R>
     : never
 }
@@ -290,17 +290,17 @@ export interface SerializedWorkerPool<I extends Schema.TaggedRequest.Any> {
   readonly backing: Pool.Pool<SerializedWorker<I>, WorkerError>
   readonly broadcast: <Req extends I>(
     message: Req
-  ) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer _A>
+  ) => Req extends Serializable.WithResult<infer _A, infer _I, infer E, infer _EI, infer R>
     ? Effect.Effect<void, E | WorkerError | ParseResult.ParseError, R>
     : never
   readonly execute: <Req extends I>(
     message: Req
-  ) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer A>
+  ) => Req extends Serializable.WithResult<infer A, infer _I, infer E, infer _EI, infer R>
     ? Stream.Stream<A, E | WorkerError | ParseResult.ParseError, R>
     : never
   readonly executeEffect: <Req extends I>(
     message: Req
-  ) => Req extends Serializable.WithResult<infer R, infer _IE, infer E, infer _IA, infer A>
+  ) => Req extends Serializable.WithResult<infer A, infer _I, infer E, infer _EI, infer R>
     ? Effect.Effect<A, E | WorkerError | ParseResult.ParseError, R>
     : never
 }
diff --git a/src/WorkerError.ts b/src/WorkerError.ts
index 227ea5742dc9ab5bf55de82c10278f0e2241b587..c1911e4393e87261e053622b7851a6b4bf165b92 100644
--- a/src/WorkerError.ts
+++ b/src/WorkerError.ts
@@ -55,22 +55,24 @@ export class WorkerError extends Schema.TaggedError<WorkerError>()("WorkerError"
    */
   static readonly Cause: Schema.Schema<
     Cause.Cause<WorkerError>,
-    Schema.CauseFrom<WorkerErrorFrom>
+    Schema.CauseEncoded<WorkerErrorFrom>
   > = Schema.cause({ defect: causeDefectPretty, error: this })
 
   /**
    * @since 1.0.0
    */
-  static readonly encodeCause: (a: Cause.Cause<WorkerError>) => Schema.CauseFrom<WorkerErrorFrom> = Schema.encodeSync(
-    this.Cause
-  )
+  static readonly encodeCause: (a: Cause.Cause<WorkerError>) => Schema.CauseEncoded<WorkerErrorFrom> = Schema
+    .encodeSync(
+      this.Cause
+    )
 
   /**
    * @since 1.0.0
    */
-  static readonly decodeCause: (u: Schema.CauseFrom<WorkerErrorFrom>) => Cause.Cause<WorkerError> = Schema.decodeSync(
-    this.Cause
-  )
+  static readonly decodeCause: (u: Schema.CauseEncoded<WorkerErrorFrom>) => Cause.Cause<WorkerError> = Schema
+    .decodeSync(
+      this.Cause
+    )
 
   /**
    * @since 1.0.0
diff --git a/src/WorkerRunner.ts b/src/WorkerRunner.ts
index 1af6670fee0a3804a1a95659ff45dbbcd246c4d1..abc17d3b1f5a4f6c0d56960d6383e9c15316ec8b 100644
--- a/src/WorkerRunner.ts
+++ b/src/WorkerRunner.ts
@@ -121,19 +121,19 @@ export declare namespace SerializedRunner {
       A,
       { readonly _tag: K }
     > extends Serializable.SerializableWithResult<
-      infer _RS,
-      infer _IS,
       infer S,
-      infer _RR,
-      infer _IE,
+      infer _SI,
+      infer _SR,
+      infer A,
+      infer _AI,
       infer E,
-      infer _IO,
-      infer O
+      infer _EI,
+      infer _RR
     > ? (
         _: S
       ) =>
-        | Stream.Stream<O, E, any>
-        | Effect.Effect<O, E, any>
+        | Stream.Stream<A, E, any>
+        | Effect.Effect<A, E, any>
         | Layer.Layer<any, E, any>
         | Layer.Layer<never, E, any>
       : never
diff --git a/src/internal/http/multipart.ts b/src/internal/http/multipart.ts
index f67b0863de270e06035b19acac74e7e3e509fcec..7d17d00cfb069f137fe9579921df70ff66cf146e 100644
--- a/src/internal/http/multipart.ts
+++ b/src/internal/http/multipart.ts
@@ -90,7 +90,7 @@ export const withFieldMimeTypes = dual<
 >(2, (effect, mimeTypes) => Effect.locally(effect, fieldMimeTypes, Chunk.fromIterable(mimeTypes)))
 
 const fileSchema: Schema.Schema<Multipart.PersistedFile> = Schema.struct({
-  [TypeId]: Schema.uniqueSymbol(TypeId),
+  [TypeId]: Schema.uniqueSymbolFromSelf(TypeId),
   _tag: Schema.literal("PersistedFile"),
   key: Schema.string,
   name: Schema.string,
