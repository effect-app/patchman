diff --git a/_mjs/index.mjs b/_mjs/index.mjs
index 60bf2875e54ae5dd88bf56541ab5fd5089acc718..993b019a0265a68bf9862e5b02faf8843d554234 100644
--- a/_mjs/index.mjs
+++ b/_mjs/index.mjs
@@ -8,6 +8,14 @@ import * as ReadonlyArray from "effect/ReadonlyArray";
 import * as ReadonlyRecord from "effect/ReadonlyRecord";
 import * as S from "effect/Struct";
 const orElse = /*#__PURE__*/dual(2, (self, that) => Either.isLeft(self) ? that(self.left) : Either.right(self.right));
+const clone = (original, copy) => {
+  if (cloneTrait in original) {
+    const originalWithClone = original;
+    return originalWithClone[cloneTrait](copy);
+  }
+  return Object.setPrototypeOf(copy, Object.getPrototypeOf(original));
+};
+export const cloneTrait = /*#__PURE__*/Symbol();
 /**
  * Compose two optics when the piece of the whole returned by the get
  * operator of the first optic is not needed by the set operator of the
@@ -43,16 +51,16 @@ const at = key => lens(s => s[key], b => s => {
     out[key] = b;
     return out;
   }
-  return {
+  return clone(s, {
     ...s,
     [key]: b
-  };
+  });
 });
-const pick = (...keys) => lens(S.pick(...keys), a => s => ({
+const pick = (...keys) => lens(S.pick(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
-const omit = (...keys) => lens(S.omit(...keys), a => s => ({
+const omit = (...keys) => lens(S.omit(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
diff --git a/_mjs/index.mjs.map b/_mjs/index.mjs.map
index 78f3f7736b0dc7a58a2fecafc728d7bc06707bd3..59e8db73d7a230809edeb3b97aa75447584554e1 100644
--- a/_mjs/index.mjs.map
+++ b/_mjs/index.mjs.map
@@ -1 +1 @@
-{"version":3,"file":"index.mjs","names":["Either","dual","identity","pipe","Option","ReadonlyArray","ReadonlyRecord","S","orElse","self","that","isLeft","left","right","prismComposition","Builder","getWhole","getOptic","flatMap","getPiece","GetError1","SetPiece","setOptic","match","onLeft","_","SetWholeAfter","onRight","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","key","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","Error","nonNullable","some","fromOption","index","i","optional","get","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","set","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","getOrElse","modify","f"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.mjs","names":["Either","dual","identity","pipe","Option","ReadonlyArray","ReadonlyRecord","S","orElse","self","that","isLeft","left","right","clone","original","copy","cloneTrait","originalWithClone","Object","setPrototypeOf","getPrototypeOf","Symbol","prismComposition","Builder","getWhole","getOptic","flatMap","getPiece","GetError1","SetPiece","setOptic","match","onLeft","_","SetWholeAfter","onRight","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","key","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","Error","nonNullable","some","fromOption","index","i","optional","get","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","set","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","getOrElse","modify","f"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
diff --git a/index.d.ts b/index.d.ts
index 1a24dabaf503f898b7f0d73834b259e3d546d3de..502d417bfb55a845f7d1516c6874f22f16a4b1d9 100644
--- a/index.d.ts
+++ b/index.d.ts
@@ -6,6 +6,10 @@ import * as Option from "effect/Option";
 import type { Predicate, Refinement } from "effect/Predicate";
 import * as ReadonlyArray from "effect/ReadonlyArray";
 import * as ReadonlyRecord from "effect/ReadonlyRecord";
+export declare const cloneTrait: unique symbol;
+export interface Clone {
+    [cloneTrait](this: this, that: any): this;
+}
 /**
  * @since 1.0.0
  */
diff --git a/index.d.ts.map b/index.d.ts.map
index 099ffd5f34bf90a392b5a29ecc9a86c26fd19322..ae2ef124668a5fd34b2510292661f3a13a15539a 100644
--- a/index.d.ts.map
+++ b/index.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA;;GAEG;AACH,OAAO,KAAK,MAAM,MAAM,eAAe,CAAA;AAEvC,OAAO,KAAK,MAAM,MAAM,eAAe,CAAA;AACvC,OAAO,KAAK,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAA;AAC7D,OAAO,KAAK,aAAa,MAAM,sBAAsB,CAAA;AACrD,OAAO,KAAK,cAAc,MAAM,uBAAuB,CAAA;AAoBvD;;GAEG;AACH,MAAM,WAAW,KAAK,CACpB,EAAE,CAAC,QAAQ,EACX,EAAE,CAAC,cAAc,EACjB,EAAE,CAAC,QAAQ,EACX,GAAG,CAAC,QAAQ,EACZ,GAAG,CAAC,QAAQ,EACZ,GAAG,CAAC,QAAQ,EACZ,GAAG,CAAC,aAAa;IAEjB,QAAQ,CAAC,QAAQ,EAAE,CACjB,QAAQ,EAAE,QAAQ,KACf,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,EAAE,aAAa,CAAC,EAAE,QAAQ,CAAC,CAAA;IAChE,QAAQ,CAAC,QAAQ,EAAE,CACjB,QAAQ,EAAE,QAAQ,KACf,CACH,cAAc,EAAE,cAAc,KAC3B,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,EAAE,aAAa,CAAC,EAAE,aAAa,CAAC,CAAA;IAErE;;OAEG;IACH,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAC7D,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACzB,IAAI,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GACxB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IACtB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAChE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC1B,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GACzB,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IACvB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAC3F,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACnC,IAAI,EAAE,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAClC,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IAChC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACnE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC3B,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAC1B,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IACxB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAC5E,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC9B,IAAI,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAC7B,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IAE3B;;;;OAIG;IACH,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IAC1E,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,GAAG,MAAM,CAAC,EAC1C,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC1B,GAAG,EAAE,GAAG,GACP,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IACjC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,EAC1B,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,GAAG,EAAE,GAAG,GACP,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IACtB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,GAAG,MAAM,CAAC,EAC1C,IAAI,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC9B,GAAG,EAAE,GAAG,GACP,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IAErC;;;;OAIG;IACH,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,SAAS,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAC3D,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAChB,GAAG,IAAI,EAAE,IAAI,GACZ,IAAI,CAAC,CAAC,EAAE;QAAE,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAAE,CAAC,CAAA;IAClD,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,SAAS,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAC3D,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,GAAG,IAAI,EAAE,IAAI,GACZ,QAAQ,CAAC,CAAC,EAAE;QAAE,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAAE,CAAC,CAAA;IAEtD;;;;OAIG;IACH,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,SAAS,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAC3D,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAChB,GAAG,IAAI,EAAE,IAAI,GACZ,IAAI,CAAC,CAAC,EAAE;QAAE,QAAQ,EAAE,CAAC,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAAE,CAAC,CAAA;IACpE,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,SAAS,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAC3D,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,GAAG,IAAI,EAAE,IAAI,GACZ,QAAQ,CAAC,CAAC,EAAE;QAAE,QAAQ,EAAE,CAAC,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAAE,CAAC,CAAA;IAExE;;;;OAIG;IACH,MAAM,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EACvC,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EACjB,UAAU,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5B,OAAO,CAAC,EAAE,MAAM,GACf,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACd,MAAM,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EAC1B,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EACjB,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EACvB,OAAO,CAAC,EAAE,MAAM,GACf,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACd,MAAM,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EACvC,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,UAAU,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5B,OAAO,CAAC,EAAE,MAAM,GACf,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACjB,MAAM,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EAC1B,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EACvB,OAAO,CAAC,EAAE,MAAM,GACf,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAEjB;;;;OAIG;IACH,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;IAC9D,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;IAEpE;;;;OAIG;IACH,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACzD,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAE/D;;;;OAIG;IACH,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAE3E;;;;OAIG;IACH,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,MAAM,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;CAC5F;AAyQD;;GAEG;AACH,MAAM,WAAW,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAC/C,SAAQ,KAAK,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAChD;AAEF;;GAEG;AACH,MAAM,WAAW,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEvE;;;GAGG;AACH,eAAO,MAAM,GAAG,EAAE;IAChB,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACxD,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;CAEe,CAAA;AAEzF;;;;;GAKG;AACH,eAAO,MAAM,EAAE,EAAE;IACf,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAChB,CAAC,CAAC,EAAE,CAAC,KAAK,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;CACE,CAAA;AAEjC;;GAEG;AACH,MAAM,WAAW,QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAE,SAAQ,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEjG;;GAEG;AACH,MAAM,WAAW,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEzE;;;GAGG;AACH,eAAO,MAAM,IAAI,EAAE;IACjB,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAChE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;CAEO,CAAA;AAEzF;;GAEG;AACH,MAAM,WAAW,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACjD,SAAQ,KAAK,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAChD;AAEF;;;GAGG;AACH,eAAO,MAAM,SAAS,yHAG6E,CAAA;AAEnG;;GAEG;AACH,MAAM,WAAW,KAAK,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAE3E;;;GAGG;AACH,eAAO,MAAM,KAAK,uFAGwE,CAAA;AAE1F;;;;;GAKG;AACH,eAAO,MAAM,IAAI,EAAE;IACjB,CAAC,CAAC,KAAK,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;IAC9D,CAAC,CAAC,EAAE,CAAC,KAAK,SAAS,CACjB,aAAa,CAAC,CAAC,CAAC,EAChB,aAAa,CAAC,CAAC,CAAC,EAChB,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,EAC9B,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,CAC/B,CAAA;CAQA,CAAA;AAEH;;GAEG;AACH,MAAM,WAAW,iBAAiB,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACzD,SAAQ,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAC1C;AAEF;;GAEG;AACH,eAAO,MAAM,iBAAiB,+IAIwC,CAAA;AAEtE;;GAEG;AACH,MAAM,WAAW,aAAa,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAE3F;;GAEG;AACH,eAAO,MAAM,aAAa,mGAImE,CAAA;AAE7F;;;;;GAKG;AACH,eAAO,MAAM,cAAc,EAAE;IAC3B,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC,EAAE,MAAM,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACrF,CAAC,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,EAAE,MAAM,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;CAK0B,CAAA;AAE/F;;GAEG;AACH,MAAM,WAAW,YAAY,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACpD,SAAQ,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAC1C;AAEF;;;GAGG;AACH,eAAO,MAAM,YAAY,qLAGwD,CAAA;AAEjF;;GAEG;AACH,MAAM,WAAW,QAAQ,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEjF;;;GAGG;AACH,eAAO,MAAM,QAAQ,iIAOlB,CAAA;AAEH;;;;;GAKG;AACH,eAAO,MAAM,OAAO,qCACiE,CAAA;AAErF;;;GAGG;AACH,eAAO,MAAM,IAAI,oCAA4D,CAAA;AAE7E;;;GAGG;AACH,eAAO,MAAM,IAAI,+CAA2E,CAAA;AAE5F;;;;;GAKG;AACH,eAAO,MAAM,SAAS,EAAE;IACtB,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EAC9B,UAAU,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5B,OAAO,CAAC,EAAE,MAAM,GACf,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAChC,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,EAAE,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;CAyB7F,CAAA;AAEH;;GAEG;AACH,MAAM,WAAW,UAAU,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAC3C,SAAQ,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;CACtD;AAEF;;GAEG;AACH,MAAM,WAAW,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAE,SAAQ,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEtE;;GAEG;AACH,MAAM,WAAW,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAE,SAAQ,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;CAAG;AAElG;;GAEG;AACH,MAAM,WAAW,aAAa,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACrD,SAAQ,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC;CAC9D;AAEF;;;GAGG;AACH,eAAO,MAAM,aAAa,+LAG0C,CAAA;AAEpE;;GAEG;AACH,MAAM,WAAW,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,aAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEnF;;;GAGG;AACH,eAAO,MAAM,SAAS,mJAOnB,CAAA;AAEH;;GAEG;AACH,MAAM,WAAW,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAE,SAAQ,MAAM,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC;CAAG;AAEzE;;GAEG;AACH,eAAO,MAAM,GAAG,mEACuD,CAAA;AAEvE;;GAEG;AACH,eAAO,MAAM,SAAS,2DAC0C,CAAA;AAEhE;;GAEG;AACH,eAAO,MAAM,WAAW,gFAC+D,CAAA;AAEvF;;GAEG;AACH,eAAO,MAAM,MAAM,wFAE8C,CAAA;AAEjE;;GAEG;AACH,eAAO,MAAM,MAAM,kEAC6E,CAAA;AAEhG;;GAEG;AACH,eAAO,MAAM,OAAO,gEACgE,CAAA;AAEpF;;GAEG;AACH,eAAO,MAAM,aAAa,+EACmD,CAAA;AAE7E;;GAEG;AACH,eAAO,MAAM,MAAM,kFAOZ,CAAA"}
\ No newline at end of file
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA;;GAEG;AACH,OAAO,KAAK,MAAM,MAAM,eAAe,CAAA;AAEvC,OAAO,KAAK,MAAM,MAAM,eAAe,CAAA;AACvC,OAAO,KAAK,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAA;AAC7D,OAAO,KAAK,aAAa,MAAM,sBAAsB,CAAA;AACrD,OAAO,KAAK,cAAc,MAAM,uBAAuB,CAAA;AA2BvD,eAAO,MAAM,UAAU,eAAW,CAAA;AAElC,MAAM,WAAW,KAAK;IACpB,CAAC,UAAU,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,GAAG,IAAI,CAAA;CAC1C;AAED;;GAEG;AACH,MAAM,WAAW,KAAK,CACpB,EAAE,CAAC,QAAQ,EACX,EAAE,CAAC,cAAc,EACjB,EAAE,CAAC,QAAQ,EACX,GAAG,CAAC,QAAQ,EACZ,GAAG,CAAC,QAAQ,EACZ,GAAG,CAAC,QAAQ,EACZ,GAAG,CAAC,aAAa;IAEjB,QAAQ,CAAC,QAAQ,EAAE,CACjB,QAAQ,EAAE,QAAQ,KACf,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,EAAE,aAAa,CAAC,EAAE,QAAQ,CAAC,CAAA;IAChE,QAAQ,CAAC,QAAQ,EAAE,CACjB,QAAQ,EAAE,QAAQ,KACf,CACH,cAAc,EAAE,cAAc,KAC3B,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,EAAE,aAAa,CAAC,EAAE,aAAa,CAAC,CAAA;IAErE;;OAEG;IACH,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAC7D,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACzB,IAAI,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GACxB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IACtB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAChE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC1B,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GACzB,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IACvB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAC3F,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACnC,IAAI,EAAE,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAClC,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IAChC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACnE,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC3B,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAC1B,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IACxB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAC5E,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACtB,IAAI,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC9B,IAAI,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAC7B,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IAE3B;;;;OAIG;IACH,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IAC1E,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,GAAG,MAAM,CAAC,EAC1C,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC1B,GAAG,EAAE,GAAG,GACP,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IACjC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,EAC1B,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,GAAG,EAAE,GAAG,GACP,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IACtB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,GAAG,MAAM,CAAC,EAC1C,IAAI,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC9B,GAAG,EAAE,GAAG,GACP,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IAErC;;;;OAIG;IACH,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,SAAS,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAC3D,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAChB,GAAG,IAAI,EAAE,IAAI,GACZ,IAAI,CAAC,CAAC,EAAE;QAAE,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAAE,CAAC,CAAA;IAClD,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,SAAS,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAC3D,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,GAAG,IAAI,EAAE,IAAI,GACZ,QAAQ,CAAC,CAAC,EAAE;QAAE,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAAE,CAAC,CAAA;IAEtD;;;;OAIG;IACH,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,SAAS,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAC3D,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAChB,GAAG,IAAI,EAAE,IAAI,GACZ,IAAI,CAAC,CAAC,EAAE;QAAE,QAAQ,EAAE,CAAC,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAAE,CAAC,CAAA;IACpE,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,SAAS,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAC3D,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,GAAG,IAAI,EAAE,IAAI,GACZ,QAAQ,CAAC,CAAC,EAAE;QAAE,QAAQ,EAAE,CAAC,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAAE,CAAC,CAAA;IAExE;;;;OAIG;IACH,MAAM,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EACvC,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EACjB,UAAU,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5B,OAAO,CAAC,EAAE,MAAM,GACf,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACd,MAAM,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EAC1B,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EACjB,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EACvB,OAAO,CAAC,EAAE,MAAM,GACf,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACd,MAAM,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EACvC,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,UAAU,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5B,OAAO,CAAC,EAAE,MAAM,GACf,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACjB,MAAM,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EAC1B,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EACpB,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EACvB,OAAO,CAAC,EAAE,MAAM,GACf,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAEjB;;;;OAIG;IACH,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;IAC9D,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;IAEpE;;;;OAIG;IACH,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACzD,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAE/D;;;;OAIG;IACH,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAE3E;;;;OAIG;IACH,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,MAAM,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;CAC5F;AAyQD;;GAEG;AACH,MAAM,WAAW,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAC/C,SAAQ,KAAK,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAChD;AAEF;;GAEG;AACH,MAAM,WAAW,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEvE;;;GAGG;AACH,eAAO,MAAM,GAAG,EAAE;IAChB,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACxD,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;CAEe,CAAA;AAEzF;;;;;GAKG;AACH,eAAO,MAAM,EAAE,EAAE;IACf,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAChB,CAAC,CAAC,EAAE,CAAC,KAAK,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;CACE,CAAA;AAEjC;;GAEG;AACH,MAAM,WAAW,QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAE,SAAQ,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEjG;;GAEG;AACH,MAAM,WAAW,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEzE;;;GAGG;AACH,eAAO,MAAM,IAAI,EAAE;IACjB,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAChE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;CAEO,CAAA;AAEzF;;GAEG;AACH,MAAM,WAAW,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACjD,SAAQ,KAAK,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAChD;AAEF;;;GAGG;AACH,eAAO,MAAM,SAAS,yHAG6E,CAAA;AAEnG;;GAEG;AACH,MAAM,WAAW,KAAK,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAE3E;;;GAGG;AACH,eAAO,MAAM,KAAK,uFAGwE,CAAA;AAE1F;;;;;GAKG;AACH,eAAO,MAAM,IAAI,EAAE;IACjB,CAAC,CAAC,KAAK,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;IAC9D,CAAC,CAAC,EAAE,CAAC,KAAK,SAAS,CACjB,aAAa,CAAC,CAAC,CAAC,EAChB,aAAa,CAAC,CAAC,CAAC,EAChB,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,EAC9B,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,CAC/B,CAAA;CAQA,CAAA;AAEH;;GAEG;AACH,MAAM,WAAW,iBAAiB,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACzD,SAAQ,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAC1C;AAEF;;GAEG;AACH,eAAO,MAAM,iBAAiB,+IAIwC,CAAA;AAEtE;;GAEG;AACH,MAAM,WAAW,aAAa,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAE3F;;GAEG;AACH,eAAO,MAAM,aAAa,mGAImE,CAAA;AAE7F;;;;;GAKG;AACH,eAAO,MAAM,cAAc,EAAE;IAC3B,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC,EAAE,MAAM,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACrF,CAAC,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,EAAE,MAAM,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;CAK0B,CAAA;AAE/F;;GAEG;AACH,MAAM,WAAW,YAAY,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACpD,SAAQ,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;CAC1C;AAEF;;;GAGG;AACH,eAAO,MAAM,YAAY,qLAGwD,CAAA;AAEjF;;GAEG;AACH,MAAM,WAAW,QAAQ,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEjF;;;GAGG;AACH,eAAO,MAAM,QAAQ,iIAOlB,CAAA;AAEH;;;;;GAKG;AACH,eAAO,MAAM,OAAO,qCACiE,CAAA;AAErF;;;GAGG;AACH,eAAO,MAAM,IAAI,oCAA4D,CAAA;AAE7E;;;GAGG;AACH,eAAO,MAAM,IAAI,+CAA2E,CAAA;AAE5F;;;;;GAKG;AACH,eAAO,MAAM,SAAS,EAAE;IACtB,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EAC9B,UAAU,EAAE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5B,OAAO,CAAC,EAAE,MAAM,GACf,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAChC,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,EAAE,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;CAyB7F,CAAA;AAEH;;GAEG;AACH,MAAM,WAAW,UAAU,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAC3C,SAAQ,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;CACtD;AAEF;;GAEG;AACH,MAAM,WAAW,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAE,SAAQ,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEtE;;GAEG;AACH,MAAM,WAAW,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAE,SAAQ,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;CAAG;AAElG;;GAEG;AACH,MAAM,WAAW,aAAa,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACrD,SAAQ,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC;CAC9D;AAEF;;;GAGG;AACH,eAAO,MAAM,aAAa,+LAG0C,CAAA;AAEpE;;GAEG;AACH,MAAM,WAAW,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAE,SAAQ,aAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAAG;AAEnF;;;GAGG;AACH,eAAO,MAAM,SAAS,mJAOnB,CAAA;AAEH;;GAEG;AACH,MAAM,WAAW,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAE,SAAQ,MAAM,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC;CAAG;AAEzE;;GAEG;AACH,eAAO,MAAM,GAAG,mEACuD,CAAA;AAEvE;;GAEG;AACH,eAAO,MAAM,SAAS,2DAC0C,CAAA;AAEhE;;GAEG;AACH,eAAO,MAAM,WAAW,gFAC+D,CAAA;AAEvF;;GAEG;AACH,eAAO,MAAM,MAAM,wFAE8C,CAAA;AAEjE;;GAEG;AACH,eAAO,MAAM,MAAM,kEAC6E,CAAA;AAEhG;;GAEG;AACH,eAAO,MAAM,OAAO,gEACgE,CAAA;AAEpF;;GAEG;AACH,eAAO,MAAM,aAAa,+EACmD,CAAA;AAE7E;;GAEG;AACH,eAAO,MAAM,MAAM,kFAOZ,CAAA"}
\ No newline at end of file
diff --git a/index.js b/index.js
index cd1f2a5874602e011a6ae2445348647261712444..3e306ba42e06ee1d813487683b18727dfb6d2e02 100644
--- a/index.js
+++ b/index.js
@@ -3,7 +3,7 @@
 Object.defineProperty(exports, "__esModule", {
   value: true
 });
-exports.traversal = exports.tail = exports.reversedPrism = exports.reversedFilter = exports.replaceOption = exports.replace = exports.prism = exports.polyTraversal = exports.polyReversedPrism = exports.polyPrism = exports.polyOptional = exports.optional = exports.modify = exports.lens = exports.iso = exports.indexes = exports.id = exports.head = exports.getOrModify = exports.getOption = exports.get = exports.findFirst = exports.encode = exports.decode = exports.cons = void 0;
+exports.traversal = exports.tail = exports.reversedPrism = exports.reversedFilter = exports.replaceOption = exports.replace = exports.prism = exports.polyTraversal = exports.polyReversedPrism = exports.polyPrism = exports.polyOptional = exports.optional = exports.modify = exports.lens = exports.iso = exports.indexes = exports.id = exports.head = exports.getOrModify = exports.getOption = exports.get = exports.findFirst = exports.encode = exports.decode = exports.cons = exports.cloneTrait = void 0;
 var Either = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("effect/Either"));
 var _Function = /*#__PURE__*/require("effect/Function");
 var Option = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("effect/Option"));
@@ -17,11 +17,20 @@ function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj &&
  */
 
 const orElse = /*#__PURE__*/(0, _Function.dual)(2, (self, that) => Either.isLeft(self) ? that(self.left) : Either.right(self.right));
+const clone = (original, copy) => {
+  if (cloneTrait in original) {
+    const originalWithClone = original;
+    return originalWithClone[cloneTrait](copy);
+  }
+  return Object.setPrototypeOf(copy, Object.getPrototypeOf(original));
+};
+const cloneTrait = /*#__PURE__*/Symbol();
 /**
  * Compose two optics when the piece of the whole returned by the get
  * operator of the first optic is not needed by the set operator of the
  * second optic.
  */
+exports.cloneTrait = cloneTrait;
 const prismComposition = that => self => new Builder("prism", getWhole => (0, _Function.pipe)(self.getOptic(getWhole), Either.flatMap(getPiece => (0, _Function.pipe)(that.getOptic(getPiece), orElse(([GetError1, SetPiece]) => (0, _Function.pipe)(self.setOptic(SetPiece)(getWhole), Either.match({
   onLeft: ([_, SetWholeAfter]) => Either.left([GetError1, SetWholeAfter]),
   onRight: SetWholeAfter => Either.left([GetError1, SetWholeAfter])
@@ -52,16 +61,16 @@ const at = key => lens(s => s[key], b => s => {
     out[key] = b;
     return out;
   }
-  return {
+  return clone(s, {
     ...s,
     [key]: b
-  };
+  });
 });
-const pick = (...keys) => lens(S.pick(...keys), a => s => ({
+const pick = (...keys) => lens(S.pick(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
-const omit = (...keys) => lens(S.omit(...keys), a => s => ({
+const omit = (...keys) => lens(S.omit(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
diff --git a/index.js.map b/index.js.map
index a2742732dc2f87fa179b798e61d4c349197e5be0..6b2ca145791c53841a43f573845cb2271e994308 100644
--- a/index.js.map
+++ b/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","names":["Either","_interopRequireWildcard","require","_Function","Option","ReadonlyArray","ReadonlyRecord","S","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","orElse","dual","self","that","isLeft","left","right","prismComposition","Builder","getWhole","pipe","getOptic","flatMap","getPiece","GetError1","SetPiece","setOptic","match","onLeft","_","SetWholeAfter","onRight","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","Error","identity","nonNullable","some","fromOption","index","i","optional","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","exports","id","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","getOrElse","modify","f"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.js","names":["Either","_interopRequireWildcard","require","_Function","Option","ReadonlyArray","ReadonlyRecord","S","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","orElse","dual","self","that","isLeft","left","right","clone","original","copy","cloneTrait","originalWithClone","setPrototypeOf","getPrototypeOf","Symbol","exports","prismComposition","Builder","getWhole","pipe","getOptic","flatMap","getPiece","GetError1","SetPiece","setOptic","match","onLeft","_","SetWholeAfter","onRight","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","Error","identity","nonNullable","some","fromOption","index","i","optional","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","getOrElse","modify","f"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"}
