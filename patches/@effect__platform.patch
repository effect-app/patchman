diff --git a/dist/cjs/internal/httpClient.js b/dist/cjs/internal/httpClient.js
index f4e4a006383118c5906e8f4742c65efc1cd4c4c1..1d80d7afe100e0874923d617eb41ddcd90e12bd2 100644
--- a/dist/cjs/internal/httpClient.js
+++ b/dist/cjs/internal/httpClient.js
@@ -104,11 +104,13 @@ const makeService = f => make(effect => Effect.flatMap(effect, request => Effect
     kind: "client",
     captureStackTrace: false
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     span.attribute("server.address", url.origin);
     if (url.port !== "") {
       span.attribute("server.port", +url.port);
     }
+    span.attribute("http.url", url.toString());
     span.attribute("url.full", url.toString());
     span.attribute("url.path", url.pathname);
     span.attribute("url.scheme", url.protocol.slice(0, -1));
@@ -124,6 +126,7 @@ const makeService = f => make(effect => Effect.flatMap(effect, request => Effect
     request = fiber.getFiberRef(currentTracerPropagation) ? internalRequest.setHeaders(request, TraceContext.toHeaders(span)) : request;
     return Effect.tap(Effect.withParentSpan(f(request, url, controller.signal, fiber), span), response => {
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/cjs/internal/httpClient.js.map b/dist/cjs/internal/httpClient.js.map
index 84639187447b70b1a0e31e5d4730660fcc983844..a6b5f33b9e2ddfdb2f78343a85bacfbabed6ac01 100644
--- a/dist/cjs/internal/httpClient.js.map
+++ b/dist/cjs/internal/httpClient.js.map
@@ -1 +1 @@
-{"version":3,"file":"httpClient.js","names":["Schema","_interopRequireWildcard","require","Context","Effect","FiberRef","_Function","_GlobalValue","Inspectable","Layer","_Pipeable","Predicate","Ref","Scope","Cookies","Headers","Error","TraceContext","UrlParams","internalBody","internalRequest","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","globalValue","unsafeMake","constFalse","withTracerDisabledWhen","dual","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","ClientProto","pipe","pipeArguments","arguments","BaseProto","toJSON","_id","url","options","execute","head","post","put","patch","del","isClient","hasProperty","make","postprocess","preprocess","create","request","makeService","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","urlParams","hash","_tag","fail","RequestError","reason","cause","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","captureStackTrace","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","transform","client","filterStatus","filterOrFail","ResponseError","description","filterStatusOk","transformResponse","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","orFailWith","map","mapEffect","scoped","mapEffectScoped","mapRequest","mapRequestEffect","mapRequestInput","mapRequestInputEffect","retry","policy","schemaFunction","args","schema","encode","tryMap","try","body","TextEncoder","JSON","stringify","catch","setBody","uint8Array","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader","followRedirects","maxRedirects","loop","redirects","location","setUrl","layerMergedContext","context","mapInputContext","input"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"httpClient.js","names":["Schema","_interopRequireWildcard","require","Context","Effect","FiberRef","_Function","_GlobalValue","Inspectable","Layer","_Pipeable","Predicate","Ref","Scope","Cookies","Headers","Error","TraceContext","UrlParams","internalBody","internalRequest","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","globalValue","unsafeMake","constFalse","withTracerDisabledWhen","dual","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","ClientProto","pipe","pipeArguments","arguments","BaseProto","toJSON","_id","url","options","execute","head","post","put","patch","del","isClient","hasProperty","make","postprocess","preprocess","create","request","makeService","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","urlParams","hash","_tag","fail","RequestError","reason","cause","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","captureStackTrace","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","transform","client","filterStatus","filterOrFail","ResponseError","description","filterStatusOk","transformResponse","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","orFailWith","map","mapEffect","scoped","mapEffectScoped","mapRequest","mapRequestEffect","mapRequestInput","mapRequestInputEffect","retry","policy","schemaFunction","args","schema","encode","tryMap","try","body","TextEncoder","JSON","stringify","catch","setBody","uint8Array","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader","followRedirects","maxRedirects","loop","redirects","location","setUrl","layerMergedContext","context","mapInputContext","input"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/cjs/internal/httpMiddleware.js b/dist/cjs/internal/httpMiddleware.js
index 74299ab4e2f4c09b72da9148c58542937257946d..304071df41a246ef61bf7d44d6c0c3b5d91ebcc6 100644
--- a/dist/cjs/internal/httpMiddleware.js
+++ b/dist/cjs/internal/httpMiddleware.js
@@ -79,8 +79,10 @@ const tracer = exports.tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRun
     kind: "server",
     captureStackTrace: false
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     if (url !== undefined) {
+      span.attribute("http.url", url.toString());
       span.attribute("url.full", url.toString());
       span.attribute("url.path", url.pathname);
       const query = url.search.slice(1);
@@ -101,6 +103,7 @@ const tracer = exports.tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRun
     return Effect.flatMap(Effect.exit(Effect.withParentSpan(httpApp, span)), exit => {
       const response = ServerError.exitResponse(exit);
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/cjs/internal/httpMiddleware.js.map b/dist/cjs/internal/httpMiddleware.js.map
index 6a3d904bfca73b86fa0f4307e6662d01b696859f..7701b50a53c271a45fb65f82b15b9ae4d32bda0e 100644
--- a/dist/cjs/internal/httpMiddleware.js.map
+++ b/dist/cjs/internal/httpMiddleware.js.map
@@ -1 +1 @@
-{"version":3,"file":"httpMiddleware.js","names":["Context","_interopRequireWildcard","require","Effect","FiberRef","_Function","_GlobalValue","Layer","Option","Headers","ServerError","ServerRequest","ServerResponse","TraceContext","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","make","middleware","exports","loggerDisabled","globalValue","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","currentTracerDisabledWhen","constFalse","withTracerDisabledWhen","dual","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","context","getFiberRef","currentContext","request","unsafeGet","HttpServerRequest","withLogSpan","flatMap","exit","_tag","response","cause","causeResponseStripped","annotateLogs","log","value","method","status","tracer","disabled","getOrUndefined","toURL","undefined","username","password","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","useSpan","parent","fromHeaders","kind","captureStackTrace","span","attribute","toString","pathname","query","search","slice","protocol","name","String","remoteAddress","withParentSpan","exitResponse","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","params","searchParamsFromURL","URL","add","ParsedSearchParams","cors","options","opts","allowedOrigins","allowedMethods","allowedHeaders","exposedHeaders","credentials","isAllowedOrigin","origin","allowOrigin","originHeader","length","vary","allowMethods","join","allowCredentials","allowHeaders","accessControlRequestHeaders","exposeHeaders","maxAge","corsHeaders","unsafeFromRecord","assign","succeed","empty","map","setHeaders"],"sources":["../../../src/internal/httpMiddleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"httpMiddleware.js","names":["Context","_interopRequireWildcard","require","Effect","FiberRef","_Function","_GlobalValue","Layer","Option","Headers","ServerError","ServerRequest","ServerResponse","TraceContext","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","make","middleware","exports","loggerDisabled","globalValue","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","currentTracerDisabledWhen","constFalse","withTracerDisabledWhen","dual","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","context","getFiberRef","currentContext","request","unsafeGet","HttpServerRequest","withLogSpan","flatMap","exit","_tag","response","cause","causeResponseStripped","annotateLogs","log","value","method","status","tracer","disabled","getOrUndefined","toURL","undefined","username","password","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","useSpan","parent","fromHeaders","kind","captureStackTrace","span","attribute","toString","pathname","query","search","slice","protocol","name","String","remoteAddress","withParentSpan","exitResponse","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","params","searchParamsFromURL","URL","add","ParsedSearchParams","cors","options","opts","allowedOrigins","allowedMethods","allowedHeaders","exposedHeaders","credentials","isAllowedOrigin","origin","allowOrigin","originHeader","length","vary","allowMethods","join","allowCredentials","allowHeaders","accessControlRequestHeaders","exposeHeaders","maxAge","corsHeaders","unsafeFromRecord","assign","succeed","empty","map","setHeaders"],"sources":["../../../src/internal/httpMiddleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/esm/internal/httpClient.js b/dist/esm/internal/httpClient.js
index 6587578d090b1ce5ad2c9a58a9cdcb0aa5ce7381..3a010bedd7eff4ae7ad23f62eafacd804cce7477 100644
--- a/dist/esm/internal/httpClient.js
+++ b/dist/esm/internal/httpClient.js
@@ -95,11 +95,13 @@ export const makeService = f => make(effect => Effect.flatMap(effect, request =>
     kind: "client",
     captureStackTrace: false
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     span.attribute("server.address", url.origin);
     if (url.port !== "") {
       span.attribute("server.port", +url.port);
     }
+    span.attribute("http.url", url.toString());
     span.attribute("url.full", url.toString());
     span.attribute("url.path", url.pathname);
     span.attribute("url.scheme", url.protocol.slice(0, -1));
@@ -115,6 +117,7 @@ export const makeService = f => make(effect => Effect.flatMap(effect, request =>
     request = fiber.getFiberRef(currentTracerPropagation) ? internalRequest.setHeaders(request, TraceContext.toHeaders(span)) : request;
     return Effect.tap(Effect.withParentSpan(f(request, url, controller.signal, fiber), span), response => {
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/esm/internal/httpClient.js.map b/dist/esm/internal/httpClient.js.map
index d3bb54373a075064280c330ba8af41cf33c79394..e9cbf6104c27e44bac6b89cacdb394110b50f2ce 100644
--- a/dist/esm/internal/httpClient.js.map
+++ b/dist/esm/internal/httpClient.js.map
@@ -1 +1 @@
-{"version":3,"file":"httpClient.js","names":["Schema","Context","Effect","FiberRef","constFalse","dual","globalValue","Inspectable","Layer","pipeArguments","Predicate","Ref","Scope","Cookies","Headers","Error","TraceContext","UrlParams","internalBody","internalRequest","TypeId","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","unsafeMake","withTracerDisabledWhen","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","ClientProto","pipe","arguments","BaseProto","toJSON","_id","get","url","options","execute","head","post","put","patch","del","isClient","u","hasProperty","make","postprocess","preprocess","Object","create","request","makeService","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","urlParams","hash","_tag","fail","RequestError","reason","cause","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","captureStackTrace","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","transform","client","filterStatus","filterOrFail","ResponseError","description","filterStatusOk","transformResponse","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","orFailWith","map","mapEffect","scoped","mapEffectScoped","mapRequest","mapRequestEffect","mapRequestInput","mapRequestInputEffect","retry","policy","schemaFunction","args","schema","encode","a","tryMap","try","body","TextEncoder","JSON","stringify","catch","setBody","uint8Array","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader","followRedirects","maxRedirects","loop","redirects","location","setUrl","layerMergedContext","context","mapInputContext","input"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"httpClient.js","names":["Schema","Context","Effect","FiberRef","constFalse","dual","globalValue","Inspectable","Layer","pipeArguments","Predicate","Ref","Scope","Cookies","Headers","Error","TraceContext","UrlParams","internalBody","internalRequest","TypeId","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","unsafeMake","withTracerDisabledWhen","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","ClientProto","pipe","arguments","BaseProto","toJSON","_id","get","url","options","execute","head","post","put","patch","del","isClient","u","hasProperty","make","postprocess","preprocess","Object","create","request","makeService","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","urlParams","hash","_tag","fail","RequestError","reason","cause","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","captureStackTrace","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","transform","client","filterStatus","filterOrFail","ResponseError","description","filterStatusOk","transformResponse","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","orFailWith","map","mapEffect","scoped","mapEffectScoped","mapRequest","mapRequestEffect","mapRequestInput","mapRequestInputEffect","retry","policy","schemaFunction","args","schema","encode","a","tryMap","try","body","TextEncoder","JSON","stringify","catch","setBody","uint8Array","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader","followRedirects","maxRedirects","loop","redirects","location","setUrl","layerMergedContext","context","mapInputContext","input"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":"AAEA,OAAO,KAAKA,MAAM,MAAM,uBAAuB;AAC/C,OAAO,KAAKC,OAAO,MAAM,gBAAgB;AACzC,OAAO,KAAKC,MAAM,MAAM,eAAe;AAEvC,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,SAASC,UAAU,EAAEC,IAAI,QAAQ,iBAAiB;AAClD,SAASC,WAAW,QAAQ,oBAAoB;AAChD,OAAO,KAAKC,WAAW,MAAM,oBAAoB;AACjD,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,OAAO,KAAKC,SAAS,MAAM,kBAAkB;AAC7C,OAAO,KAAKC,GAAG,MAAM,YAAY;AAEjC,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,OAAO,KAAKC,OAAO,MAAM,eAAe;AACxC,OAAO,KAAKC,OAAO,MAAM,eAAe;AAExC,OAAO,KAAKC,KAAK,MAAM,uBAAuB;AAG9C,OAAO,KAAKC,YAAY,MAAM,wBAAwB;AACtD,OAAO,KAAKC,SAAS,MAAM,iBAAiB;AAC5C,OAAO,KAAKC,YAAY,MAAM,eAAe;AAC7C,OAAO,KAAKC,eAAe,MAAM,wBAAwB;AAEzD;AACA,OAAO,MAAMC,MAAM,gBAAkBC,MAAM,CAACC,GAAG,CAC7C,6BAA6B,CACb;AAElB;AACA,OAAO,MAAMC,GAAG,gBAAGtB,OAAO,CAACuB,UAAU,CAA4B,6BAA6B,CAAC;AAE/F;AACA,OAAO,MAAMC,yBAAyB,gBAAGnB,WAAW,eAClDe,MAAM,CAACC,GAAG,CAAC,gDAAgD,CAAC,EAC5D,MAAMnB,QAAQ,CAACuB,UAAU,CAAuDtB,UAAU,CAAC,CAC5F;AAED;AACA,OAAO,MAAMuB,sBAAsB,gBAAGtB,IAAI,CAQxC,CAAC,EAAE,CAACuB,IAAI,EAAEC,IAAI,KAAK3B,MAAM,CAAC4B,OAAO,CAACF,IAAI,EAAEH,yBAAyB,EAAEI,IAAI,CAAC,CAAC;AAE3E;AACA,OAAO,MAAME,wBAAwB,gBAAGzB,WAAW,eACjDe,MAAM,CAACC,GAAG,CAAC,sDAAsD,CAAC,EAClE,MAAMnB,QAAQ,CAACuB,UAAU,CAAC,IAAI,CAAC,CAChC;AAED;AACA,OAAO,MAAMM,qBAAqB,gBAAG3B,IAAI,CAQvC,CAAC,EAAE,CAACuB,IAAI,EAAEK,OAAO,KAAK/B,MAAM,CAAC4B,OAAO,CAACF,IAAI,EAAEG,wBAAwB,EAAEE,OAAO,CAAC,CAAC;AAEhF,MAAMC,WAAW,GAAG;EAClB,CAACd,MAAM,GAAGA,MAAM;EAChBe,IAAIA,CAAA;IACF,OAAO1B,aAAa,CAAC,IAAI,EAAE2B,SAAS,CAAC;EACvC,CAAC;EACD,GAAG7B,WAAW,CAAC8B,SAAS;EACxBC,MAAMA,CAAA;IACJ,OAAO;MACLC,GAAG,EAAE;KACN;EACH,CAAC;EACDC,GAAGA,CAAkCC,GAAiB,EAAEC,OAAsC;IAC5F,OAAO,IAAI,CAACC,OAAO,CAACxB,eAAe,CAACqB,GAAG,CAACC,GAAG,EAAEC,OAAO,CAAC,CAAC;EACxD,CAAC;EACDE,IAAIA,CAAkCH,GAAiB,EAAEC,OAAsC;IAC7F,OAAO,IAAI,CAACC,OAAO,CAACxB,eAAe,CAACyB,IAAI,CAACH,GAAG,EAAEC,OAAO,CAAC,CAAC;EACzD,CAAC;EACDG,IAAIA,CAAkCJ,GAAiB,EAAEC,OAAoC;IAC3F,OAAO,IAAI,CAACC,OAAO,CAACxB,eAAe,CAAC0B,IAAI,CAACJ,GAAG,EAAEC,OAAO,CAAC,CAAC;EACzD,CAAC;EACDI,GAAGA,CAAkCL,GAAiB,EAAEC,OAAoC;IAC1F,OAAO,IAAI,CAACC,OAAO,CAACxB,eAAe,CAAC2B,GAAG,CAACL,GAAG,EAAEC,OAAO,CAAC,CAAC;EACxD,CAAC;EACDK,KAAKA,CAAkCN,GAAiB,EAAEC,OAAoC;IAC5F,OAAO,IAAI,CAACC,OAAO,CAACxB,eAAe,CAAC4B,KAAK,CAACN,GAAG,EAAEC,OAAO,CAAC,CAAC;EAC1D,CAAC;EACDM,GAAGA,CAAkCP,GAAiB,EAAEC,OAAqC;IAC3F,OAAO,IAAI,CAACC,OAAO,CAACxB,eAAe,CAAC6B,GAAG,CAACP,GAAG,EAAEC,OAAO,CAAC,CAAC;EACxD,CAAC;EACDA,OAAOA,CAAkCD,GAAiB,EAAEC,OAAsC;IAChG,OAAO,IAAI,CAACC,OAAO,CAACxB,eAAe,CAACuB,OAAO,CAACD,GAAG,EAAEC,OAAO,CAAC,CAAC;EAC5D;CACD;AAED,MAAMO,QAAQ,GAAIC,CAAU,IAAwDxC,SAAS,CAACyC,WAAW,CAACD,CAAC,EAAE9B,MAAM,CAAC;AAOpH;AACA,OAAO,MAAMgC,IAAI,GAAGA,CAClBC,WAE2B,EAC3BC,UAAgD,KAClB;EAC9B,MAAM1B,IAAI,GAAG2B,MAAM,CAACC,MAAM,CAACtB,WAAW,CAAC;EACvCN,IAAI,CAAC0B,UAAU,GAAGA,UAAU;EAC5B1B,IAAI,CAACyB,WAAW,GAAGA,WAAW;EAC9BzB,IAAI,CAACe,OAAO,GAAG,UAASc,OAAwC;IAC9D,OAAOJ,WAAW,CAACC,UAAU,CAACG,OAAO,CAAC,CAAC;EACzC,CAAC;EACD,OAAO7B,IAAI;AACb,CAAC;AAED;AACA,OAAO,MAAM8B,WAAW,GACtBC,CAKyF,IAEzFP,IAAI,CAAEQ,MAAM,IACV1D,MAAM,CAAC2D,OAAO,CAACD,MAAM,EAAGH,OAAO,IAC7BvD,MAAM,CAAC4D,gBAAgB,CAAEC,KAAK,IAAI;EAChC,MAAMC,KAAK,GAAG/D,OAAO,CAACgE,SAAS,CAACF,KAAK,CAACG,WAAW,CAAC/D,QAAQ,CAACgE,cAAc,CAAC,EAAEvD,KAAK,CAACA,KAAK,CAAC;EACxF,MAAMwD,UAAU,GAAG,IAAIC,eAAe,EAAE;EACxC,MAAMC,QAAQ,GAAG1D,KAAK,CAAC2D,YAAY,CAACP,KAAK,EAAE9D,MAAM,CAACsE,IAAI,CAAC,MAAMJ,UAAU,CAACK,KAAK,EAAE,CAAC,CAAC;EACjF,MAAMC,SAAS,GAAGzD,SAAS,CAAC0D,OAAO,CAAClB,OAAO,CAAChB,GAAG,EAAEgB,OAAO,CAACmB,SAAS,EAAEnB,OAAO,CAACoB,IAAI,CAAC;EACjF,IAAIH,SAAS,CAACI,IAAI,KAAK,MAAM,EAAE;IAC7B,OAAO5E,MAAM,CAAC6E,IAAI,CAAC,IAAIhE,KAAK,CAACiE,YAAY,CAAC;MAAEvB,OAAO;MAAEwB,MAAM,EAAE,YAAY;MAAEC,KAAK,EAAER,SAAS,CAACS;IAAI,CAAE,CAAC,CAAC;EACtG;EACA,MAAM1C,GAAG,GAAGiC,SAAS,CAACU,KAAK;EAC3B,MAAMC,cAAc,GAAG,CAACtB,KAAK,CAACG,WAAW,CAAC/D,QAAQ,CAACmF,oBAAoB,CAAC,IACtEvB,KAAK,CAACG,WAAW,CAACzC,yBAAyB,CAAC,CAACgC,OAAO,CAAC;EACvD,IAAI4B,cAAc,EAAE;IAClB,OAAOnF,MAAM,CAACqF,QAAQ,CACpBjB,QAAQ,EACRX,CAAC,CAACF,OAAO,EAAEhB,GAAG,EAAE2B,UAAU,CAACoB,MAAM,EAAEzB,KAAK,CAAC,CAC1C;EACH;EACA,OAAO7D,MAAM,CAACqF,QAAQ,CACpBjB,QAAQ,EACRpE,MAAM,CAACuF,OAAO,CACZ,eAAehC,OAAO,CAACiC,MAAM,EAAE,EAC/B;IAAEC,IAAI,EAAE,QAAQ;IAAEC,iBAAiB,EAAE;EAAK,CAAE,EAC3CC,IAAI,IAAI;IACPA,IAAI,CAACC,SAAS,CAAC,aAAa,EAAErC,OAAO,CAACiC,MAAM,CAAC;IAC7CG,IAAI,CAACC,SAAS,CAAC,qBAAqB,EAAErC,OAAO,CAACiC,MAAM,CAAC;IACrDG,IAAI,CAACC,SAAS,CAAC,gBAAgB,EAAErD,GAAG,CAACsD,MAAM,CAAC;IAC5C,IAAItD,GAAG,CAACuD,IAAI,KAAK,EAAE,EAAE;MACnBH,IAAI,CAACC,SAAS,CAAC,aAAa,EAAE,CAACrD,GAAG,CAACuD,IAAI,CAAC;IAC1C;IACAH,IAAI,CAACC,SAAS,CAAC,UAAU,EAAErD,GAAG,CAACwD,QAAQ,EAAE,CAAC;IAC1CJ,IAAI,CAACC,SAAS,CAAC,UAAU,EAAErD,GAAG,CAACwD,QAAQ,EAAE,CAAC;IAC1CJ,IAAI,CAACC,SAAS,CAAC,UAAU,EAAErD,GAAG,CAACyD,QAAQ,CAAC;IACxCL,IAAI,CAACC,SAAS,CAAC,YAAY,EAAErD,GAAG,CAAC0D,QAAQ,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACvD,MAAMC,KAAK,GAAG5D,GAAG,CAAC6D,MAAM,CAACF,KAAK,CAAC,CAAC,CAAC;IACjC,IAAIC,KAAK,KAAK,EAAE,EAAE;MAChBR,IAAI,CAACC,SAAS,CAAC,WAAW,EAAEO,KAAK,CAAC;IACpC;IACA,MAAME,mBAAmB,GAAGxC,KAAK,CAACG,WAAW,CAACpD,OAAO,CAAC0F,oBAAoB,CAAC;IAC3E,MAAMC,eAAe,GAAG3F,OAAO,CAAC4F,MAAM,CAACjD,OAAO,CAACkD,OAAO,EAAEJ,mBAAmB,CAAC;IAC5E,KAAK,MAAMK,IAAI,IAAIH,eAAe,EAAE;MAClCZ,IAAI,CAACC,SAAS,CAAC,uBAAuBc,IAAI,EAAE,EAAEC,MAAM,CAACJ,eAAe,CAACG,IAAI,CAAC,CAAC,CAAC;IAC9E;IACAnD,OAAO,GAAGM,KAAK,CAACG,WAAW,CAACnC,wBAAwB,CAAC,GACjDZ,eAAe,CAAC2F,UAAU,CAACrD,OAAO,EAAEzC,YAAY,CAAC+F,SAAS,CAAClB,IAAI,CAAC,CAAC,GACjEpC,OAAO;IACX,OAAOvD,MAAM,CAAC8G,GAAG,CACf9G,MAAM,CAAC+G,cAAc,CACnBtD,CAAC,CACCF,OAAO,EACPhB,GAAG,EACH2B,UAAU,CAACoB,MAAM,EACjBzB,KAAK,CACN,EACD8B,IAAI,CACL,EACAqB,QAAQ,IAAI;MACXrB,IAAI,CAACC,SAAS,CAAC,2BAA2B,EAAEoB,QAAQ,CAACC,MAAM,CAAC;MAC5DtB,IAAI,CAACC,SAAS,CAAC,kBAAkB,EAAEoB,QAAQ,CAACC,MAAM,CAAC;MACnD,MAAMV,eAAe,GAAG3F,OAAO,CAAC4F,MAAM,CAACQ,QAAQ,CAACP,OAAO,EAAEJ,mBAAmB,CAAC;MAC7E,KAAK,MAAMK,IAAI,IAAIH,eAAe,EAAE;QAClCZ,IAAI,CAACC,SAAS,CAAC,wBAAwBc,IAAI,EAAE,EAAEC,MAAM,CAACJ,eAAe,CAACG,IAAI,CAAC,CAAC,CAAC;MAC/E;IACF,CAAC,CACF;EACH,CAAC,CACF,CACF;AACH,CAAC,CAAC,CAAC,EAAE1G,MAAM,CAACkH,OAAqD,CAAC;AAExE;AACA,OAAO,MAAMC,SAAS,gBAAGhH,IAAI,CAc3B,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAI;EACf,MAAM2D,MAAM,GAAG1F,IAAqC;EACpD,OAAOwB,IAAI,CACTlD,MAAM,CAAC2D,OAAO,CAAEJ,OAAO,IAAKE,CAAC,CAAC2D,MAAM,CAACjE,WAAW,CAACnD,MAAM,CAACkH,OAAO,CAAC3D,OAAO,CAAC,CAAC,EAAEA,OAAO,CAAC,CAAC,EACpF6D,MAAM,CAAChE,UAAU,CAClB;AACH,CAAC,CAAC;AAEF;AACA,OAAO,MAAMiE,YAAY,gBAAGlH,IAAI,CAU9B,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KACX0D,SAAS,CAACzF,IAAI,EAAE,CAACgC,MAAM,EAAEH,OAAO,KAC9BvD,MAAM,CAACsH,YAAY,CACjB5D,MAAM,EACLsD,QAAQ,IAAKvD,CAAC,CAACuD,QAAQ,CAACC,MAAM,CAAC,EAC/BD,QAAQ,IACP,IAAInG,KAAK,CAAC0G,aAAa,CAAC;EACtBhE,OAAO;EACPyD,QAAQ;EACRjC,MAAM,EAAE,YAAY;EACpByC,WAAW,EAAE;CACd,CAAC,CACL,CAAC,CAAC;AAEP;AACA,OAAO,MAAMC,cAAc,GACzB/F,IAA0C,IAE1CyF,SAAS,CAACzF,IAAI,EAAE,CAACgC,MAAM,EAAEH,OAAO,KAC9BvD,MAAM,CAACsH,YAAY,CACjB5D,MAAM,EACLsD,QAAQ,IAAKA,QAAQ,CAACC,MAAM,IAAI,GAAG,IAAID,QAAQ,CAACC,MAAM,GAAG,GAAG,EAC5DD,QAAQ,IACP,IAAInG,KAAK,CAAC0G,aAAa,CAAC;EACtBhE,OAAO;EACPyD,QAAQ;EACRjC,MAAM,EAAE,YAAY;EACpByC,WAAW,EAAE;CACd,CAAC,CACL,CAAC;AAEN;AACA,OAAO,MAAME,iBAAiB,gBAAGvH,IAAI,CAQnC,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAI;EACf,MAAM2D,MAAM,GAAG1F,IAAqC;EACpD,OAAOwB,IAAI,CAAEK,OAAO,IAAKE,CAAC,CAAC2D,MAAM,CAACjE,WAAW,CAACI,OAAO,CAAC,CAAC,EAAE6D,MAAM,CAAChE,UAAU,CAAC;AAC7E,CAAC,CAAC;AAEF;AACA,OAAO,MAAMuE,QAAQ,gBAoBjBxH,IAAI,CACN,CAAC,EACD,CASEuB,IAAgC,EAChCL,GAAM,EACNoC,CAA4D,KACQiE,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAAC2H,QAAQ,CAACtG,GAAG,EAAEoC,CAAC,CAAC,CAAC,CACvH;AAED;AACA,OAAO,MAAMmE,SAAS,gBA0FlBzH,IAAI,CACN,CAAC,EACD,CAoBEuB,IAAgC,EAChCmG,KAAY,KAuBTH,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAAC4H,SAAS,CAACC,KAAK,CAAC,CAAC,CACtD;AAED;AACA,OAAO,MAAMC,QAAQ,gBAQjB3H,IAAI,CACN,CAAC,EACD,CACEuB,IAAgC,EAChC+B,CAAsC,KACIiE,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAAC8H,QAAQ,CAACrE,CAAC,CAAC,CAAC,CACxF;AAED;AACA,OAAO,MAAMsE,YAAY,gBAqBrB5H,IAAI,CAAC,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,EAAEuE,MAAM,KAAKN,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAAC+H,YAAY,CAACtE,CAAC,EAAEuE,MAAM,CAAC,CAAC,CAAC;AAEzF;AACA,OAAO,MAAMV,YAAY,gBAmBrBnH,IAAI,CAAC,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,EAAEwE,UAAU,KAAKP,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAACsH,YAAY,CAAC7D,CAAC,EAAEwE,UAAU,CAAC,CAAC,CAAC;AAEjG;AACA,OAAO,MAAMC,GAAG,gBAAG/H,IAAI,CAQrB,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAKiE,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAACkI,GAAG,CAACzE,CAAC,CAAC,CAAC,CAAC;AAEzD;AACA,OAAO,MAAM0E,SAAS,gBAAGhI,IAAI,CAQ3B,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAKiE,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAAC2D,OAAO,CAACF,CAAC,CAAC,CAAC,CAAC;AAE7D;AACA,OAAO,MAAM2E,MAAM,GACjB1G,IAAgC,IACqBgG,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAACoI,MAAM,CAAC;AAE7F;AACA,OAAO,MAAMC,eAAe,gBAAGlI,IAAI,CAQjC,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAK2E,MAAM,CAACD,SAAS,CAACzG,IAAI,EAAE+B,CAAC,CAAC,CAAC,CAAC;AAE7C;AACA,OAAO,MAAM6E,UAAU,gBAAGnI,IAAI,CAQ5B,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAI;EACf,MAAM2D,MAAM,GAAG1F,IAAqC;EACpD,OAAOwB,IAAI,CAACkE,MAAM,CAACjE,WAAW,EAAGI,OAAO,IAAKvD,MAAM,CAACkI,GAAG,CAACd,MAAM,CAAChE,UAAU,CAACG,OAAO,CAAC,EAAEE,CAAC,CAAC,CAAC;AACzF,CAAC,CAAC;AAEF;AACA,OAAO,MAAM8E,gBAAgB,gBAAGpI,IAAI,CAclC,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAI;EACf,MAAM2D,MAAM,GAAG1F,IAAqC;EACpD,OAAOwB,IAAI,CAACkE,MAAM,CAACjE,WAAkB,EAAGI,OAAO,IAAKvD,MAAM,CAAC2D,OAAO,CAACyD,MAAM,CAAChE,UAAU,CAACG,OAAO,CAAC,EAAEE,CAAC,CAAC,CAAC;AACpG,CAAC,CAAC;AAEF;AACA,OAAO,MAAM+E,eAAe,gBAAGrI,IAAI,CAQjC,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAI;EACf,MAAM2D,MAAM,GAAG1F,IAAqC;EACpD,OAAOwB,IAAI,CAACkE,MAAM,CAACjE,WAAW,EAAGI,OAAO,IAAK6D,MAAM,CAAChE,UAAU,CAACK,CAAC,CAACF,OAAO,CAAC,CAAC,CAAC;AAC7E,CAAC,CAAC;AAEF;AACA,OAAO,MAAMkF,qBAAqB,gBAAGtI,IAAI,CAcvC,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAI;EACf,MAAM2D,MAAM,GAAG1F,IAAqC;EACpD,OAAOwB,IAAI,CAACkE,MAAM,CAACjE,WAAkB,EAAGI,OAAO,IAAKvD,MAAM,CAAC2D,OAAO,CAACF,CAAC,CAACF,OAAO,CAAC,EAAE6D,MAAM,CAAChE,UAAU,CAAC,CAAC;AACpG,CAAC,CAAC;AAEF;AACA,OAAO,MAAMsF,KAAK,gBAiBdvI,IAAI,CACN,CAAC,EACD,CACEuB,IAAgC,EAChCiH,MAAoC,KACAjB,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAAC0I,KAAK,CAACC,MAAM,CAAC,CAAC,CACpF;AAED;AACA,OAAO,MAAMC,cAAc,gBAAGzI,IAAI,CAoB/B0I,IAAI,IAAK9F,QAAQ,CAAC8F,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAACnH,IAAI,EAAEoH,MAAM,EAAEtG,OAAO,KAAI;EACvD,MAAMuG,MAAM,GAAGjJ,MAAM,CAACiJ,MAAM,CAACD,MAAM,EAAEtG,OAAO,CAAC;EAC7C,OAAQe,OAAO,IAAMyF,CAAC,IACpBhJ,MAAM,CAAC2D,OAAO,CACZ3D,MAAM,CAACiJ,MAAM,CAACF,MAAM,CAACC,CAAC,CAAC,EAAE;IACvBE,GAAG,EAAGC,IAAI,IAAK,IAAIC,WAAW,EAAE,CAACL,MAAM,CAACM,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC,CAAC;IAC7DI,KAAK,EAAGvE,KAAK,IACX,IAAInE,KAAK,CAACiE,YAAY,CAAC;MACrBvB,OAAO;MACPwB,MAAM,EAAE,QAAQ;MAChBC;KACD;GACJ,CAAC,EACDmE,IAAI,IACHzH,IAAI,CAACe,OAAO,CACVxB,eAAe,CAACuI,OAAO,CACrBjG,OAAO,EACPvC,YAAY,CAACyI,UAAU,CAACN,IAAI,EAAE,kBAAkB,CAAC,CAClD,CACF,CACJ;AACL,CAAC,CAAC;AAEF;AACA,OAAO,MAAMrC,GAAG,gBAAG3G,IAAI,CAQrB,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAKiE,iBAAiB,CAAChG,IAAI,EAAE1B,MAAM,CAAC8G,GAAG,CAACrD,CAAC,CAAC,CAAC,CAAC;AAEzD;AACA,OAAO,MAAMiG,UAAU,gBAAGvJ,IAAI,CAU5B,CAAC,EAAE,CAACuB,IAAI,EAAE+B,CAAC,KAAI;EACf,MAAM2D,MAAM,GAAG1F,IAAqC;EACpD,OAAOwB,IAAI,CAACkE,MAAM,CAACjE,WAAkB,EAAGI,OAAO,IAAKvD,MAAM,CAAC8G,GAAG,CAACM,MAAM,CAAChE,UAAU,CAACG,OAAO,CAAC,EAAEE,CAAC,CAAC,CAAC;AAChG,CAAC,CAAC;AAEF;AACA,OAAO,MAAMkG,cAAc,gBAAGxJ,IAAI,CAShC,CAAC,EACD,CACEuB,IAA0C,EAC1CkI,GAA6B,KACW;EACxC,MAAMxC,MAAM,GAAG1F,IAA+D;EAC9E,OAAOwB,IAAI,CACRK,OAA6D,IAC5DvD,MAAM,CAAC8G,GAAG,CACRM,MAAM,CAACjE,WAAW,CAACI,OAAO,CAAC,EAC1ByD,QAAQ,IAAKvG,GAAG,CAACoJ,MAAM,CAACD,GAAG,EAAGE,OAAO,IAAKnJ,OAAO,CAACoJ,KAAK,CAACD,OAAO,EAAE9C,QAAQ,CAAC8C,OAAO,CAAC,CAAC,CACrF,EACFvG,OAAO,IACNvD,MAAM,CAAC2D,OAAO,CAACyD,MAAM,CAAChE,UAAU,CAACG,OAAO,CAAC,EAAGA,OAAO,IACjDvD,MAAM,CAACkI,GAAG,CACRzH,GAAG,CAAC6B,GAAG,CAACsH,GAAG,CAAC,EACXE,OAAO,IACNnJ,OAAO,CAACqJ,OAAO,CAACF,OAAO,CAAC,GACpBvG,OAAO,GACPtC,eAAe,CAACgJ,SAAS,CAAC1G,OAAO,EAAE,QAAQ,EAAE5C,OAAO,CAACuJ,cAAc,CAACJ,OAAO,CAAC,CAAC,CACpF,CAAC,CACP;AACH,CAAC,CACF;AAED;AACA,OAAO,MAAMK,eAAe,gBAAGhK,IAAI,CAQhC0I,IAAI,IAAK9F,QAAQ,CAAC8F,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAC7BnH,IAA0C,EAC1C0I,YAAiC,KACO;EACxC,MAAMhD,MAAM,GAAG1F,IAA+D;EAC9E,OAAOwB,IAAI,CACRK,OAAO,IAAI;IACV,MAAM8G,IAAI,GAAGA,CACX9G,OAAwC,EACxC+G,SAAiB,KAEjBtK,MAAM,CAAC2D,OAAO,CACZyD,MAAM,CAACjE,WAAW,CAACnD,MAAM,CAACkH,OAAO,CAAC3D,OAAO,CAAC,CAAC,EAC1CyD,QAAQ,IACPA,QAAQ,CAACC,MAAM,IAAI,GAAG,IAAID,QAAQ,CAACC,MAAM,GAAG,GAAG,IAAID,QAAQ,CAACP,OAAO,CAAC8D,QAAQ,IAC1ED,SAAS,IAAIF,YAAY,IAAI,EAAE,CAAC,GAC9BC,IAAI,CACJpJ,eAAe,CAACuJ,MAAM,CACpBjH,OAAO,EACPyD,QAAQ,CAACP,OAAO,CAAC8D,QAAQ,CAC1B,EACDD,SAAS,GAAG,CAAC,CACd,GACCtK,MAAM,CAACkH,OAAO,CAACF,QAAQ,CAAC,CAC/B;IACH,OAAOhH,MAAM,CAAC2D,OAAO,CAACJ,OAAO,EAAGA,OAAO,IAAK8G,IAAI,CAAC9G,OAAO,EAAE,CAAC,CAAC,CAAC;EAC/D,CAAC,EACD6D,MAAM,CAAChE,UAAU,CAClB;AACH,CAAC,CAAC;AAEF;AACA,OAAO,MAAMqH,kBAAkB,GAAU/G,MAAsD,IAC7FpD,KAAK,CAACoD,MAAM,CACVrC,GAAG,EACHrB,MAAM,CAAC2D,OAAO,CAAC3D,MAAM,CAAC0K,OAAO,EAAS,EAAGA,OAAO,IAC9C1K,MAAM,CAACkI,GAAG,CAACxE,MAAM,EAAG0D,MAAM,IACxBM,iBAAiB,CACfN,MAAM,EACNpH,MAAM,CAAC2K,eAAe,CAAEC,KAAmC,IAAK7K,OAAO,CAACgK,KAAK,CAACW,OAAO,EAAEE,KAAK,CAAC,CAAC,CAC/F,CAAC,CAAC,CACR","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/esm/internal/httpMiddleware.js b/dist/esm/internal/httpMiddleware.js
index a09111d1b79d70b97b9cc1674de57258c54b22d2..b9de848c3d5438ab92a73467c8d4bd2c9a479e0d 100644
--- a/dist/esm/internal/httpMiddleware.js
+++ b/dist/esm/internal/httpMiddleware.js
@@ -69,8 +69,10 @@ export const tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRuntime(fiber
     kind: "server",
     captureStackTrace: false
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     if (url !== undefined) {
+      span.attribute("http.url", url.toString());
       span.attribute("url.full", url.toString());
       span.attribute("url.path", url.pathname);
       const query = url.search.slice(1);
@@ -91,6 +93,7 @@ export const tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRuntime(fiber
     return Effect.flatMap(Effect.exit(Effect.withParentSpan(httpApp, span)), exit => {
       const response = ServerError.exitResponse(exit);
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/esm/internal/httpMiddleware.js.map b/dist/esm/internal/httpMiddleware.js.map
index e3951e374f500f89dea259188bc863c9105eefab..8538760bfc04c8e955a757330d65f5fde1fcc550 100644
--- a/dist/esm/internal/httpMiddleware.js.map
+++ b/dist/esm/internal/httpMiddleware.js.map
@@ -1 +1 @@
-{"version":3,"file":"httpMiddleware.js","names":["Context","Effect","FiberRef","constFalse","dual","globalValue","Layer","Option","Headers","ServerError","ServerRequest","ServerResponse","TraceContext","make","middleware","loggerDisabled","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","set","currentTracerDisabledWhen","withTracerDisabledWhen","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","context","getFiberRef","currentContext","request","unsafeGet","HttpServerRequest","withLogSpan","flatMap","exit","_tag","response","cause","causeResponseStripped","annotateLogs","log","value","method","status","tracer","disabled","getOrUndefined","toURL","undefined","username","password","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","useSpan","parent","fromHeaders","kind","captureStackTrace","span","attribute","toString","pathname","query","search","slice","protocol","name","String","remoteAddress","withParentSpan","exitResponse","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","params","searchParamsFromURL","URL","add","ParsedSearchParams","cors","options","opts","allowedOrigins","allowedMethods","allowedHeaders","exposedHeaders","credentials","isAllowedOrigin","origin","allowOrigin","originHeader","length","vary","allowMethods","join","allowCredentials","allowHeaders","accessControlRequestHeaders","exposeHeaders","maxAge","corsHeaders","unsafeFromRecord","Object","assign","succeed","empty","map","setHeaders"],"sources":["../../../src/internal/httpMiddleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"httpMiddleware.js","names":["Context","Effect","FiberRef","constFalse","dual","globalValue","Layer","Option","Headers","ServerError","ServerRequest","ServerResponse","TraceContext","make","middleware","loggerDisabled","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","set","currentTracerDisabledWhen","withTracerDisabledWhen","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","context","getFiberRef","currentContext","request","unsafeGet","HttpServerRequest","withLogSpan","flatMap","exit","_tag","response","cause","causeResponseStripped","annotateLogs","log","value","method","status","tracer","disabled","getOrUndefined","toURL","undefined","username","password","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","useSpan","parent","fromHeaders","kind","captureStackTrace","span","attribute","toString","pathname","query","search","slice","protocol","name","String","remoteAddress","withParentSpan","exitResponse","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","params","searchParamsFromURL","URL","add","ParsedSearchParams","cors","options","opts","allowedOrigins","allowedMethods","allowedHeaders","exposedHeaders","credentials","isAllowedOrigin","origin","allowOrigin","originHeader","length","vary","allowMethods","join","allowCredentials","allowHeaders","accessControlRequestHeaders","exposeHeaders","maxAge","corsHeaders","unsafeFromRecord","Object","assign","succeed","empty","map","setHeaders"],"sources":["../../../src/internal/httpMiddleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/src/internal/httpClient.ts b/src/internal/httpClient.ts
index 3398146422f04742a98d8ed5849f757887a085fc..56ceaa027295b080fdc5e50199180641f26244d2 100644
--- a/src/internal/httpClient.ts
+++ b/src/internal/httpClient.ts
@@ -158,11 +158,13 @@ export const makeService = (
             `http.client ${request.method}`,
             { kind: "client", captureStackTrace: false },
             (span) => {
+              span.attribute("http.method", request.method)
               span.attribute("http.request.method", request.method)
               span.attribute("server.address", url.origin)
               if (url.port !== "") {
                 span.attribute("server.port", +url.port)
               }
+              span.attribute("http.url", url.toString())
               span.attribute("url.full", url.toString())
               span.attribute("url.path", url.pathname)
               span.attribute("url.scheme", url.protocol.slice(0, -1))
@@ -190,6 +192,7 @@ export const makeService = (
                 ),
                 (response) => {
                   span.attribute("http.response.status_code", response.status)
+                  span.attribute("http.status_code", response.status)
                   const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames)
                   for (const name in redactedHeaders) {
                     span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]))
diff --git a/src/internal/httpMiddleware.ts b/src/internal/httpMiddleware.ts
index ca8aaa70efd0d04261374ce93d219a8c576e0f6e..870a8d00f9c8642137ff6423b52defd7d6d697cc 100644
--- a/src/internal/httpMiddleware.ts
+++ b/src/internal/httpMiddleware.ts
@@ -131,8 +131,10 @@ export const tracer = make((httpApp) =>
         captureStackTrace: false
       },
       (span) => {
+        span.attribute("http.method", request.method)
         span.attribute("http.request.method", request.method)
         if (url !== undefined) {
+          span.attribute("http.url", url.toString())
           span.attribute("url.full", url.toString())
           span.attribute("url.path", url.pathname)
           const query = url.search.slice(1)
@@ -155,6 +157,7 @@ export const tracer = make((httpApp) =>
           (exit) => {
             const response = ServerError.exitResponse(exit)
             span.attribute("http.response.status_code", response.status)
+            span.attribute("http.status_code", response.status)
             const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames)
             for (const name in redactedHeaders) {
               span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]))
