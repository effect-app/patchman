diff --git a/dist/cjs/internal/http/client.js b/dist/cjs/internal/http/client.js
index 6a5af05322235bae7c9a84e1c1ca619499ef1366..7ef55a2505b803c0b2896dc6de87ed2e90f1f6d1 100644
--- a/dist/cjs/internal/http/client.js
+++ b/dist/cjs/internal/http/client.js
@@ -105,11 +105,13 @@ const makeDefault = f => make(effect => Effect.flatMap(effect, request => Effect
   return Effect.zipRight(addAbort, Effect.useSpan(`http.client ${request.method}`, {
     kind: "client"
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     span.attribute("server.address", url.origin);
     if (url.port !== "") {
       span.attribute("server.port", +url.port);
     }
+    span.attribute("http.url", url.toString());
     span.attribute("url.full", url.toString());
     span.attribute("url.path", url.pathname);
     span.attribute("url.scheme", url.protocol.slice(0, -1));
@@ -125,6 +127,7 @@ const makeDefault = f => make(effect => Effect.flatMap(effect, request => Effect
     request = fiber.getFiberRef(currentTracerPropagation) ? internalRequest.setHeaders(request, TraceContext.toHeaders(span)) : request;
     return Effect.tap(Effect.withParentSpan(f(request, url, controller.signal, fiber), span), response => {
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/cjs/internal/http/client.js.map b/dist/cjs/internal/http/client.js.map
index 0ed9112f4ddfc76fb5ffb96c3e7b629ae5ddf336..3dc7ef18821f1fee68c73afb9e46fc8e80d4b816 100644
--- a/dist/cjs/internal/http/client.js.map
+++ b/dist/cjs/internal/http/client.js.map
@@ -1 +1 @@
-{"version":3,"file":"client.js","names":["Schema","_interopRequireWildcard","require","Context","Effect","FiberRef","_Function","_GlobalValue","Layer","_Pipeable","Predicate","Ref","Scope","Stream","Error","Cookies","Headers","Method","TraceContext","UrlParams","internalBody","internalRequest","internalResponse","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","globalValue","unsafeMake","constFalse","withTracerDisabledWhen","dual","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","currentFetchOptions","withFetchOptions","options","clientProto","pipe","pipeArguments","arguments","isClient","hasProperty","make","execute","preprocess","client","request","setPrototypeOf","makeDefault","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","url","urlParams","_tag","fail","RequestError","reason","error","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","Fetch","fetch","context","unsafeMap","key","globalThis","send","body","map","tryPromise","try","duplex","undefined","catch","fromWeb","hasBody","convertBody","formData","toReadableStream","stream","transform","filterStatus","filterOrFail","ResponseError","filterStatusOk","fetchOk","layer","transformResponse","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","orFailWith","mapEffect","scoped","mapEffectScoped","mapRequest","mapRequestEffect","mapInputRequest","mapInputRequestEffect","retry","policy","schemaFunction","args","schema","encode","tryMap","TextEncoder","JSON","stringify","setBody","uint8Array","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader"],"sources":["../../../../src/internal/http/client.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"client.js","names":["Schema","_interopRequireWildcard","require","Context","Effect","FiberRef","_Function","_GlobalValue","Layer","_Pipeable","Predicate","Ref","Scope","Stream","Error","Cookies","Headers","Method","TraceContext","UrlParams","internalBody","internalRequest","internalResponse","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","globalValue","unsafeMake","constFalse","withTracerDisabledWhen","dual","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","currentFetchOptions","withFetchOptions","options","clientProto","pipe","pipeArguments","arguments","isClient","hasProperty","make","execute","preprocess","client","request","setPrototypeOf","makeDefault","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","url","urlParams","_tag","fail","RequestError","reason","error","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","Fetch","fetch","context","unsafeMap","key","globalThis","send","body","map","tryPromise","try","duplex","undefined","catch","fromWeb","hasBody","convertBody","formData","toReadableStream","stream","transform","filterStatus","filterOrFail","ResponseError","filterStatusOk","fetchOk","layer","transformResponse","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","orFailWith","mapEffect","scoped","mapEffectScoped","mapRequest","mapRequestEffect","mapInputRequest","mapInputRequestEffect","retry","policy","schemaFunction","args","schema","encode","tryMap","TextEncoder","JSON","stringify","setBody","uint8Array","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader"],"sources":["../../../../src/internal/http/client.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/cjs/internal/http/middleware.js b/dist/cjs/internal/http/middleware.js
index 24ab2ca3514cfd38ac3c355aca376e0381943d09..6452dcd75f6065aecefdbb1eaa7e98ef3bb8136e 100644
--- a/dist/cjs/internal/http/middleware.js
+++ b/dist/cjs/internal/http/middleware.js
@@ -104,8 +104,10 @@ const tracer = exports.tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRun
     parent: Option.getOrUndefined(TraceContext.fromHeaders(request.headers)),
     kind: "server"
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     if (url !== undefined) {
+      span.attribute("http.url", url.toString());
       span.attribute("url.full", url.toString());
       span.attribute("url.path", url.pathname);
       const query = url.search.slice(1);
@@ -126,9 +128,11 @@ const tracer = exports.tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRun
     return Effect.flatMap(Effect.exit(Effect.withParentSpan(httpApp, span)), exit => {
       if (exit._tag === "Failure") {
         span.attribute("http.response.status_code", ServerError.causeStatusCode(exit.cause));
+        span.attribute("http.status_code", ServerError.causeStatusCode(exit.cause));
       } else {
         const response = exit.value;
         span.attribute("http.response.status_code", response.status);
+        span.attribute("http.status_code", response.status);
         const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
         for (const name in redactedHeaders) {
           span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/cjs/internal/http/middleware.js.map b/dist/cjs/internal/http/middleware.js.map
index 766f1a06b6f42581f3ead01ce12e2b9a6713aa8c..4f471c3be9ebdade9c33a7031908de60976a9f96 100644
--- a/dist/cjs/internal/http/middleware.js.map
+++ b/dist/cjs/internal/http/middleware.js.map
@@ -1 +1 @@
-{"version":3,"file":"middleware.js","names":["Context","_interopRequireWildcard","require","Effect","FiberRef","_Function","_GlobalValue","Layer","Option","Headers","ServerError","ServerRequest","TraceContext","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","make","middleware","exports","loggerDisabled","globalValue","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","currentTracerDisabledWhen","constFalse","withTracerDisabledWhen","dual","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","context","getFiberRef","currentContext","request","unsafeGet","withLogSpan","flatMap","exit","_tag","annotateLogs","log","cause","method","causeStatusCode","value","status","tracer","disabled","host","headers","protocol","undefined","URL","username","password","_","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","useSpan","parent","getOrUndefined","fromHeaders","kind","span","attribute","toString","pathname","query","search","slice","name","String","remoteAddress","withParentSpan","response","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","params","searchParamsFromURL","add","ParsedSearchParams"],"sources":["../../../../src/internal/http/middleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"middleware.js","names":["Context","_interopRequireWildcard","require","Effect","FiberRef","_Function","_GlobalValue","Layer","Option","Headers","ServerError","ServerRequest","TraceContext","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","make","middleware","exports","loggerDisabled","globalValue","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","currentTracerDisabledWhen","constFalse","withTracerDisabledWhen","dual","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","context","getFiberRef","currentContext","request","unsafeGet","withLogSpan","flatMap","exit","_tag","annotateLogs","log","cause","method","causeStatusCode","value","status","tracer","disabled","host","headers","protocol","undefined","URL","username","password","_","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","useSpan","parent","getOrUndefined","fromHeaders","kind","span","attribute","toString","pathname","query","search","slice","name","String","remoteAddress","withParentSpan","response","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","params","searchParamsFromURL","add","ParsedSearchParams"],"sources":["../../../../src/internal/http/middleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/dts/WorkerError.d.ts b/dist/dts/WorkerError.d.ts
index df86fb3f90695ad21d8f8ee19a24539041133b28..299434de83ee365a935539e3e35a4832b956285e 100644
--- a/dist/dts/WorkerError.d.ts
+++ b/dist/dts/WorkerError.d.ts
@@ -18,23 +18,12 @@ export type WorkerErrorTypeId = typeof WorkerErrorTypeId;
  * @category predicates
  */
 export declare const isWorkerError: (u: unknown) => u is WorkerError;
-declare const WorkerError_base: Schema.Class<WorkerError, {
-    readonly _tag: Schema.Literal<["WorkerError"]>;
+declare const WorkerError_base: Schema.TaggedErrorClass<WorkerError, "WorkerError", {
+    readonly _tag: Schema.PropertySignature<":", "WorkerError", never, ":", "WorkerError", true, never>;
 } & {
     reason: Schema.Literal<["spawn", "decode", "send", "unknown", "encode"]>;
     error: Schema.Schema<unknown, unknown, never>;
-}, {
-    readonly _tag: "WorkerError";
-    readonly reason: "spawn" | "decode" | "send" | "unknown" | "encode";
-    readonly error: unknown;
-}, {
-    readonly _tag: "WorkerError";
-    readonly reason: "spawn" | "decode" | "send" | "unknown" | "encode";
-    readonly error: unknown;
-}, never, {
-    readonly reason: "spawn" | "decode" | "send" | "unknown" | "encode";
-    readonly error: unknown;
-}, {}, Cause.YieldableError>;
+}>;
 /**
  * @since 1.0.0
  * @category errors
diff --git a/dist/dts/WorkerError.d.ts.map b/dist/dts/WorkerError.d.ts.map
index e4dc4825659833e47dd4708e35b8ab8323169ea6..181c59905464186a7494b5f1cd295cfbf52999f7 100644
--- a/dist/dts/WorkerError.d.ts.map
+++ b/dist/dts/WorkerError.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"WorkerError.d.ts","sourceRoot":"","sources":["../../src/WorkerError.ts"],"names":[],"mappings":"AAAA;;GAEG;AACH,OAAO,KAAK,MAAM,MAAM,uBAAuB,CAAA;AAC/C,OAAO,KAAK,KAAK,MAAM,cAAc,CAAA;AAKrC;;;GAGG;AACH,eAAO,MAAM,iBAAiB,EAAE,OAAO,MAAmC,CAAA;AAE1E;;;GAGG;AACH,MAAM,MAAM,iBAAiB,GAAG,OAAO,iBAAiB,CAAA;AAExD;;;GAGG;AACH,eAAO,MAAM,aAAa,MAAO,OAAO,qBAAkE,CAAA;;;;;;;;;;;;;;;;;;AAgB1G;;;GAGG;AACH,qBAAa,WAAY,SAAQ,gBAG/B;IACA;;OAEG;IACH,QAAQ,CAAC,CAAC,iBAAiB,CAAC,EAAE,iBAAiB,CAAoB;IAEnE;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAClC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,EACxB,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CACrC,CAA2D;IAE5D;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CAG/F;IAEH;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAG/F;IAEH;;OAEG;IACH,IAAI,OAAO,WAGV;CACF;AAED;;;GAGG;AACH,MAAM,WAAW,eAAe;IAC9B,QAAQ,CAAC,IAAI,EAAE,aAAa,CAAA;IAC5B,QAAQ,CAAC,MAAM,EAAE,OAAO,GAAG,QAAQ,GAAG,MAAM,GAAG,SAAS,GAAG,QAAQ,CAAA;IACnE,QAAQ,CAAC,KAAK,EAAE,OAAO,CAAA;CACxB"}
\ No newline at end of file
+{"version":3,"file":"WorkerError.d.ts","sourceRoot":"","sources":["../../src/WorkerError.ts"],"names":[],"mappings":"AAAA;;GAEG;AACH,OAAO,KAAK,MAAM,MAAM,uBAAuB,CAAA;AAC/C,OAAO,KAAK,KAAK,MAAM,cAAc,CAAA;AAKrC;;;GAGG;AACH,eAAO,MAAM,iBAAiB,EAAE,OAAO,MAAmC,CAAA;AAE1E;;;GAGG;AACH,MAAM,MAAM,iBAAiB,GAAG,OAAO,iBAAiB,CAAA;AAExD;;;GAGG;AACH,eAAO,MAAM,aAAa,MAAO,OAAO,qBAAkE,CAAA;;;;;;;AAgB1G;;;GAGG;AACH,qBAAa,WAAY,SAAQ,gBAG/B;IACA;;OAEG;IACH,QAAQ,CAAC,CAAC,iBAAiB,CAAC,EAAE,iBAAiB,CAAoB;IAEnE;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAClC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,EACxB,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CACrC,CAA2D;IAE5D;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CAG/F;IAEH;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAG/F;IAEH;;OAEG;IACH,IAAI,OAAO,WAGV;CACF;AAED;;;GAGG;AACH,MAAM,WAAW,eAAe;IAC9B,QAAQ,CAAC,IAAI,EAAE,aAAa,CAAA;IAC5B,QAAQ,CAAC,MAAM,EAAE,OAAO,GAAG,QAAQ,GAAG,MAAM,GAAG,SAAS,GAAG,QAAQ,CAAA;IACnE,QAAQ,CAAC,KAAK,EAAE,OAAO,CAAA;CACxB"}
\ No newline at end of file
diff --git a/dist/esm/internal/http/client.js b/dist/esm/internal/http/client.js
index ea8ad915711c0f923fc3172071616a81b5c738c6..910c457a77774b4f9ddf190bd614f9fdaf7c6106 100644
--- a/dist/esm/internal/http/client.js
+++ b/dist/esm/internal/http/client.js
@@ -73,11 +73,13 @@ export const makeDefault = f => make(effect => Effect.flatMap(effect, request =>
   return Effect.zipRight(addAbort, Effect.useSpan(`http.client ${request.method}`, {
     kind: "client"
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     span.attribute("server.address", url.origin);
     if (url.port !== "") {
       span.attribute("server.port", +url.port);
     }
+    span.attribute("http.url", url.toString());
     span.attribute("url.full", url.toString());
     span.attribute("url.path", url.pathname);
     span.attribute("url.scheme", url.protocol.slice(0, -1));
@@ -93,6 +95,7 @@ export const makeDefault = f => make(effect => Effect.flatMap(effect, request =>
     request = fiber.getFiberRef(currentTracerPropagation) ? internalRequest.setHeaders(request, TraceContext.toHeaders(span)) : request;
     return Effect.tap(Effect.withParentSpan(f(request, url, controller.signal, fiber), span), response => {
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/esm/internal/http/client.js.map b/dist/esm/internal/http/client.js.map
index 4f7a63b051125d7c6752e6f202dccc50704f258b..8c2b7881cc92225cc5f8d01bf30908f000d69379 100644
--- a/dist/esm/internal/http/client.js.map
+++ b/dist/esm/internal/http/client.js.map
@@ -1 +1 @@
-{"version":3,"file":"client.js","names":["Schema","Context","Effect","FiberRef","constFalse","dual","globalValue","Layer","pipeArguments","Predicate","Ref","Scope","Stream","Error","Cookies","Headers","Method","TraceContext","UrlParams","internalBody","internalRequest","internalResponse","TypeId","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","unsafeMake","withTracerDisabledWhen","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","currentFetchOptions","withFetchOptions","options","clientProto","pipe","arguments","isClient","u","hasProperty","make","execute","preprocess","client","request","Object","setPrototypeOf","makeDefault","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","url","urlParams","_tag","fail","RequestError","reason","error","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","Fetch","fetch","context","unsafeMap","get","key","globalThis","send","body","map","tryPromise","try","duplex","undefined","catch","fromWeb","hasBody","convertBody","formData","toReadableStream","stream","transform","filterStatus","filterOrFail","ResponseError","filterStatusOk","fetchOk","layer","transformResponse","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","orFailWith","mapEffect","scoped","mapEffectScoped","mapRequest","mapRequestEffect","mapInputRequest","mapInputRequestEffect","retry","policy","schemaFunction","args","schema","encode","a","tryMap","TextEncoder","JSON","stringify","setBody","uint8Array","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader"],"sources":["../../../../src/internal/http/client.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"client.js","names":["Schema","Context","Effect","FiberRef","constFalse","dual","globalValue","Layer","pipeArguments","Predicate","Ref","Scope","Stream","Error","Cookies","Headers","Method","TraceContext","UrlParams","internalBody","internalRequest","internalResponse","TypeId","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","unsafeMake","withTracerDisabledWhen","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","currentFetchOptions","withFetchOptions","options","clientProto","pipe","arguments","isClient","u","hasProperty","make","execute","preprocess","client","request","Object","setPrototypeOf","makeDefault","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","url","urlParams","_tag","fail","RequestError","reason","error","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","Fetch","fetch","context","unsafeMap","get","key","globalThis","send","body","map","tryPromise","try","duplex","undefined","catch","fromWeb","hasBody","convertBody","formData","toReadableStream","stream","transform","filterStatus","filterOrFail","ResponseError","filterStatusOk","fetchOk","layer","transformResponse","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","orFailWith","mapEffect","scoped","mapEffectScoped","mapRequest","mapRequestEffect","mapInputRequest","mapInputRequestEffect","retry","policy","schemaFunction","args","schema","encode","a","tryMap","TextEncoder","JSON","stringify","setBody","uint8Array","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader"],"sources":["../../../../src/internal/http/client.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/esm/internal/http/middleware.js b/dist/esm/internal/http/middleware.js
index ad76b855806b0d266e58c6a2b2e39ccce3325b91..3d11a748301fa898eeabd06565de964797688896 100644
--- a/dist/esm/internal/http/middleware.js
+++ b/dist/esm/internal/http/middleware.js
@@ -71,8 +71,10 @@ export const tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRuntime(fiber
     parent: Option.getOrUndefined(TraceContext.fromHeaders(request.headers)),
     kind: "server"
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     if (url !== undefined) {
+      span.attribute("http.url", url.toString());
       span.attribute("url.full", url.toString());
       span.attribute("url.path", url.pathname);
       const query = url.search.slice(1);
@@ -93,9 +95,11 @@ export const tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRuntime(fiber
     return Effect.flatMap(Effect.exit(Effect.withParentSpan(httpApp, span)), exit => {
       if (exit._tag === "Failure") {
         span.attribute("http.response.status_code", ServerError.causeStatusCode(exit.cause));
+        span.attribute("http.status_code", ServerError.causeStatusCode(exit.cause));
       } else {
         const response = exit.value;
         span.attribute("http.response.status_code", response.status);
+        span.attribute("http.status_code", response.status);
         const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
         for (const name in redactedHeaders) {
           span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/esm/internal/http/middleware.js.map b/dist/esm/internal/http/middleware.js.map
index 2feb8bfdd57835ce8fa8d977dcfeffeac0812653..1bf1327030180fcfd505aa8cdcfccbbf37a16a23 100644
--- a/dist/esm/internal/http/middleware.js.map
+++ b/dist/esm/internal/http/middleware.js.map
@@ -1 +1 @@
-{"version":3,"file":"middleware.js","names":["Context","Effect","FiberRef","constFalse","dual","globalValue","Layer","Option","Headers","ServerError","ServerRequest","TraceContext","make","middleware","loggerDisabled","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","set","currentTracerDisabledWhen","withTracerDisabledWhen","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","context","getFiberRef","currentContext","request","unsafeGet","withLogSpan","flatMap","exit","_tag","annotateLogs","log","cause","method","causeStatusCode","value","status","tracer","disabled","host","headers","protocol","undefined","URL","username","password","_","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","useSpan","parent","getOrUndefined","fromHeaders","kind","span","attribute","toString","pathname","query","search","slice","name","String","remoteAddress","withParentSpan","response","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","params","searchParamsFromURL","add","ParsedSearchParams"],"sources":["../../../../src/internal/http/middleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"middleware.js","names":["Context","Effect","FiberRef","constFalse","dual","globalValue","Layer","Option","Headers","ServerError","ServerRequest","TraceContext","make","middleware","loggerDisabled","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","set","currentTracerDisabledWhen","withTracerDisabledWhen","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","context","getFiberRef","currentContext","request","unsafeGet","withLogSpan","flatMap","exit","_tag","annotateLogs","log","cause","method","causeStatusCode","value","status","tracer","disabled","host","headers","protocol","undefined","URL","username","password","_","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","useSpan","parent","getOrUndefined","fromHeaders","kind","span","attribute","toString","pathname","query","search","slice","name","String","remoteAddress","withParentSpan","response","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","params","searchParamsFromURL","add","ParsedSearchParams"],"sources":["../../../../src/internal/http/middleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/src/internal/http/client.ts b/src/internal/http/client.ts
index 2be03beb81f40f208b37288c9366a7ab66fcef8b..383c8061fd1abf0787d7121ca426ff7fc54ee93d 100644
--- a/src/internal/http/client.ts
+++ b/src/internal/http/client.ts
@@ -146,11 +146,13 @@ export const makeDefault = (
             `http.client ${request.method}`,
             { kind: "client" },
             (span) => {
+              span.attribute("http.method", request.method)
               span.attribute("http.request.method", request.method)
               span.attribute("server.address", url.origin)
               if (url.port !== "") {
                 span.attribute("server.port", +url.port)
               }
+              span.attribute("http.url", url.toString())
               span.attribute("url.full", url.toString())
               span.attribute("url.path", url.pathname)
               span.attribute("url.scheme", url.protocol.slice(0, -1))
@@ -178,6 +180,7 @@ export const makeDefault = (
                 ),
                 (response) => {
                   span.attribute("http.response.status_code", response.status)
+                  span.attribute("http.status_code", response.status)
                   const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames)
                   for (const name in redactedHeaders) {
                     span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]))
diff --git a/src/internal/http/middleware.ts b/src/internal/http/middleware.ts
index 36df4374c6425ab34d218338faa14cd9d32ddcd8..bace4d2ca23b7819e66115eb702c7c55878866e3 100644
--- a/src/internal/http/middleware.ts
+++ b/src/internal/http/middleware.ts
@@ -127,8 +127,10 @@ export const tracer = make((httpApp) =>
       `http.server ${request.method}`,
       { parent: Option.getOrUndefined(TraceContext.fromHeaders(request.headers)), kind: "server" },
       (span) => {
+        span.attribute("http.method", request.method)
         span.attribute("http.request.method", request.method)
         if (url !== undefined) {
+          span.attribute("http.url", url.toString())
           span.attribute("url.full", url.toString())
           span.attribute("url.path", url.pathname)
           const query = url.search.slice(1)
@@ -151,9 +153,11 @@ export const tracer = make((httpApp) =>
           (exit) => {
             if (exit._tag === "Failure") {
               span.attribute("http.response.status_code", ServerError.causeStatusCode(exit.cause))
+              span.attribute("http.status_code", ServerError.causeStatusCode(exit.cause))
             } else {
               const response = exit.value
               span.attribute("http.response.status_code", response.status)
+              span.attribute("http.status_code", response.status)
               const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames)
               for (const name in redactedHeaders) {
                 span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]))
